<!DOCTYPE html><html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üéØ WinGo Predictor Pro ‚Äî Advanced</title>
  <meta name="description" content="WinGo Predictor Pro ‚Äî Advanced dashboard with local AI heuristics, API integration, backtest, charts, and Telegram webhook."/>
  <style>
    :root{
      --gold:#FFD700;
      --gold-soft:#ffc107;
      --bg1:#0f0f0f; --bg2:#000; --panel:#111; --panel-2:#0b0b0b;
      --text:#fff; --muted:#cfcfcf; --danger:#ff6b6b; --success:#4caf50;
      --ring: 0 0 0 2px #ffa00088;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:'Segoe UI',system-ui,-apple-system,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;background:linear-gradient(135deg,var(--bg1),var(--bg2));color:var(--text);} 
    header{position:sticky;top:0;z-index:10;background:#000;padding:14px 10px;box-shadow:0 2px 8px var(--gold);}
    header .wrap{max-width:1100px;margin:0 auto;display:flex;gap:14px;align-items:center;justify-content:space-between}
    h1{margin:0;font-size:26px;color:var(--gold);letter-spacing:.3px}
    .badge{font-size:12px;background:linear-gradient(45deg,#111,#222);border:1px solid #333;padding:6px 10px;border-radius:999px;color:var(--muted)}.container{max-width:1100px;margin:30px auto;padding:0 16px}
.grid{display:grid;gap:18px}
@media(min-width:900px){.grid{grid-template-columns:2fr 1fr}}

.card{background:var(--panel);border:1px solid #1f1f1f;border-radius:18px;padding:18px;box-shadow:0 0 15px #000 inset, 0 0 12px #000}
.card h2{margin:0 0 10px;font-size:18px;color:var(--gold)}
.card p.desc{margin:0 0 12px;color:var(--muted);font-size:13px}

label{display:block;font-weight:600;margin:10px 0 6px;color:#fff}
input, select, textarea{width:100%;padding:12px 12px;border-radius:12px;background:#000;border:2px solid var(--gold);color:#fff;font-size:15px;outline:none}
input:focus, select:focus, textarea:focus{box-shadow:var(--ring)}
textarea{min-height:84px;resize:vertical}

.btn{display:inline-flex;align-items:center;gap:8px;background:var(--gold);border:none;color:#000;padding:12px 16px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 0 10px var(--gold);}
.btn.secondary{background:#1d1d1d;color:#fff;border:1px solid #2c2c2c;box-shadow:none}
.btn.ghost{background:transparent;color:var(--gold);border:1px dashed var(--gold)}
.btn:disabled{opacity:.6;cursor:not-allowed}

.row{display:flex;gap:10px;flex-wrap:wrap}
.row > *{flex:1 1 180px}

.result-box{background:var(--panel-2);color:var(--gold);padding:18px;border-radius:16px;margin-top:14px;font-size:16px;box-shadow:0 0 15px var(--gold-soft)}
.label{font-weight:700;color:#fff;margin-right:6px}

.thinking{font-size:15px;color:#FFEB3B;margin-top:8px;animation:blink 1s infinite}
@keyframes blink{0%{opacity:.2}50%{opacity:1}100%{opacity:.2}}

table{width:100%;border-collapse:collapse;border:1px solid #1d1d1d}
th,td{padding:10px 8px;border-bottom:1px solid #1d1d1d;text-align:left}
th{color:var(--gold);background:#0a0a0a;position:sticky;top:0}
tr:hover{background:#0a0a0a}
.pill{padding:4px 8px;border-radius:999px;font-size:12px}
.pill.big{background:#101c10;color:#7CFC00}
.pill.small{background:#1c1010;color:#ffb0b0}
.pill.red{background:#1d0b0b;color:#ff8a80}
.pill.green{background:#0b1d0b;color:#9cff9c}

.footer{margin:30px 0;color:#808080;text-align:center;font-size:13px}
.mini{font-size:12px;color:#aaa}

.progress{height:10px;background:#1b1b1b;border-radius:999px;overflow:hidden;border:1px solid #2b2b2b}
.progress > div{height:100%;background:linear-gradient(90deg,#ffee58,#ffb300);width:0}

.chart{width:100%;height:170px;background:#0b0b0b;border:1px solid #1d1d1d;border-radius:12px;padding:8px}
.hint{color:#b7b7b7;font-size:12px}

  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>üéØ WinGo Predictor Pro ‚Äî Advanced</h1>
      <span class="badge">Backend-ready ¬∑ Local AI Heuristics</span>
    </div>
  </header>
  <div class="container"><div class="grid">
  <!-- LEFT PANE -->
  <section class="card" id="predictCard">
    <h2>üîÆ Prediction</h2>
    <p class="desc">‡§¨‡•à‡§ï‡§è‡§Ç‡§° API (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï) + ‡§≤‡•ã‡§ï‡§≤ AI ‡§π‡•Ä‡§Ø‡•Ç‡§∞‡§ø‡§∏‡•ç‡§ü‡§ø‡§ï‡•ç‡§∏ ‡§ï‡§æ ‡§π‡§æ‡§á‡§¨‡•ç‡§∞‡§ø‡§°‡•§ ‡§Ö‡§ó‡§∞ API ‡§∏‡•á‡§ü ‡§π‡•à ‡§§‡•ã ‡§µ‡§π‡•Ä ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§≤‡•á‡§ó‡§æ, ‡§®‡§π‡•Ä‡§Ç ‡§§‡•ã ‡§®‡•Ä‡§ö‡•á ‡§¶‡§ø‡§Ø‡•á ‡§ó‡§è ‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä ‡§á‡§®‡§™‡•Å‡§ü ‡§∏‡•á ‡§≤‡•ã‡§ï‡§≤ ‡§á‡§Ç‡§ü‡•á‡§≤‡§ø‡§ú‡•á‡§Ç‡§∏ ‡§™‡•ç‡§∞‡•á‡§°‡§ø‡§ï‡•ç‡§ü ‡§ï‡§∞‡•á‡§ó‡•Ä‡•§</p>

    <div class="row">
      <div>
        <label>API Base URL (optional)</label>
        <input id="apiBase" placeholder="https://wingo-predictor-seven.vercel.app"/>
        <span class="hint">‡§ñ‡§æ‡§≤‡•Ä ‡§õ‡•ã‡§°‡§º‡§®‡•á ‡§™‡§∞ ‡§≤‡•ã‡§ï‡§≤ AI ‡§Æ‡•ã‡§° ‡§ö‡§≤‡•á‡§ó‡§æ‡•§</span>
      </div>
      <div>
        <label>Product</label>
        <select id="product">
          <option value="wingo_blue">wingo_blue</option>
          <option value="default">default</option>
        </select>
      </div>
      <div>
        <label>Period Number</label>
        <input id="period" placeholder="e.g. 20250814-001"/>
      </div>
    </div>

    <label>üî¢ ‡§™‡§ø‡§õ‡§≤‡•á ‡§®‡§Ç‡§¨‡§∞ (comma/space):</label>
    <textarea id="history" placeholder="‡§â‡§¶‡§æ. 2 7 4 1 8 2 9 0 5"></textarea>

    <div class="row">
      <button class="btn" id="btnPredict">Get Prediction</button>
      <button class="btn secondary" id="btnClear">Clear</button>
      <button class="btn ghost" id="btnSave">üíæ Save Settings</button>
    </div>
    <div id="thinking" class="thinking" style="display:none">ü§ñ AI Thinking...</div>
    <div class="result-box" id="resultBox" style="display:none"></div>

    <div class="row" style="margin-top:12px">
      <div class="card" style="background:#0c0c0c">
        <h2 style="font-size:15px">üìà Frequency Chart</h2>
        <div id="freqChart" class="chart"></div>
      </div>
      <div class="card" style="background:#0c0c0c">
        <h2 style="font-size:15px">‚öôÔ∏è Strategy Weights</h2>
        <div class="mini">‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§´‡•Ä‡§ö‡§∞ ‡§ï‡•á ‡§µ‡•á‡§ü ‡§∏‡•á ‡§è‡§Ç‡§∏‡•á‡§Ç‡§¨‡§≤ ‡§∏‡•ç‡§ï‡•ã‡§∞ ‡§¨‡§®‡§§‡§æ ‡§π‡•à‡•§</div>
        <div class="row">
          <div>
            <label>Frequency Weight</label>
            <input type="range" min="0" max="3" step="0.1" id="wFreq" value="1.2">
          </div>
          <div>
            <label>Markov/Transition Weight</label>
            <input type="range" min="0" max="3" step="0.1" id="wMark" value="1.4">
          </div>
          <div>
            <label>Streak Weight</label>
            <input type="range" min="0" max="3" step="0.1" id="wStreak" value="0.8">
          </div>
          <div>
            <label>Recency Weight</label>
            <input type="range" min="0" max="3" step="0.1" id="wRecent" value="1.0">
          </div>
        </div>
        <div class="mini">Parity/Size bias ‡§ë‡§ü‡•ã-‡§ï‡•à‡§≤‡§ø‡§¨‡•ç‡§∞‡•á‡§ü‡•á‡§° ‡§π‡•à (‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä ‡§™‡§∞)‡•§</div>
      </div>
    </div>
  </section>

  <!-- RIGHT PANE -->
  <aside class="grid">
    <section class="card">
      <h2>üß™ Bulk Generator / Backtest</h2>
      <p class="desc">API/‡§≤‡•ã‡§ï‡§≤ ‡§Æ‡•ã‡§° ‡§ï‡•á ‡§∏‡§æ‡§• ‡§¨‡•à‡§ö ‡§™‡•ç‡§∞‡•á‡§°‡§ø‡§ï‡•ç‡§∂‡§®‡•§ ‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä ‡§∏‡•á N ‡§¨‡§æ‡§∞ ‡§´‡•â‡§∞‡§µ‡§∞‡•ç‡§°-‡§∏‡•ç‡§ü‡•á‡§™ ‡§∏‡§ø‡§Æ‡•Å‡§≤‡•á‡§∂‡§®‡•§</p>
      <div class="row">
        <div>
          <label>Rounds</label>
          <input id="rounds" type="number" value="10" min="1" max="200"/>
        </div>
        <div>
          <label>Warmup (use last N)</label>
          <input id="warm" type="number" value="20" min="5" max="200"/>
        </div>
      </div>
      <div class="row">
        <button class="btn" id="btnGenerate">Generate</button>
        <button class="btn secondary" id="btnClearHist">Clear History</button>
      </div>
      <div class="progress" style="margin-top:10px"><div id="progBar"></div></div>
      <div class="mini" id="btSummary" style="margin-top:8px"></div>
      <div style="max-height:260px;overflow:auto;margin-top:10px;border-radius:12px;border:1px solid #1d1d1d">
        <table id="historyTable">
          <thead><tr>
            <th>#</th><th>Period</th><th>Product</th><th>Num</th><th>Size</th><th>Color</th><th>Conf</th><th>Strategy</th>
          </tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section class="card">
      <h2>üì¨ Telegram Webhook</h2>
      <p class="desc">Prediction ‡§ï‡•ã ‡§Ü‡§™‡§ï‡•á Telegram channel/chat ‡§™‡§∞ ‡§≠‡•á‡§ú‡•á‡§Ç (server webhook endpoint ‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§ø‡§§)‡•§</p>
      <label>Server Webhook URL</label>
      <input id="webhook" placeholder="https://your-server.com/api/webhook/telegram">
      <div class="row">
        <div><label>Bot Token</label><input id="bot" placeholder="botXXXXXXXX:AAAA...."></div>
        <div><label>Chat ID</label><input id="chat" placeholder="123456789"></div>
      </div>
      <button class="btn" id="btnSendTG">Send Last Prediction</button>
      <div class="mini" id="tgStatus" style="margin-top:8px"></div>
    </section>
  </aside>
</div>

<p class="footer">Demo UI ‚Äî Secure tokens/DB before production. Use responsibly.</p>

  </div>  <script>
    // ------------------------------ UTIL ------------------------------
    const $ = (q)=>document.querySelector(q);
    const $$ = (q)=>document.querySelectorAll(q);
    const byId = id=>document.getElementById(id);

    const saveLocal = ()=>{
      const data={
        apiBase: byId('apiBase').value.trim(),
        product: byId('product').value,
        period: byId('period').value.trim(),
        history: byId('history').value.trim(),
        w:{freq: +byId('wFreq').value, mark:+byId('wMark').value, streak:+byId('wStreak').value, recent:+byId('wRecent').value},
        rounds:+byId('rounds').value, warm:+byId('warm').value, webhook:byId('webhook').value, bot:byId('bot').value, chat:byId('chat').value
      };
      localStorage.setItem('winpro_v2', JSON.stringify(data));
      toast('‚úÖ Settings saved');
    }
    const loadLocal = ()=>{
      const raw=localStorage.getItem('winpro_v2'); if(!raw) return;
      try{
        const d=JSON.parse(raw);
        byId('apiBase').value=d.apiBase||''; byId('product').value=d.product||'wingo_blue';
        byId('period').value=d.period||''; byId('history').value=d.history||'';
        if(d.w){ byId('wFreq').value=d.w.freq||1.2; byId('wMark').value=d.w.mark||1.4; byId('wStreak').value=d.w.streak||0.8; byId('wRecent').value=d.w.recent||1; }
        if(d.rounds) byId('rounds').value=d.rounds; if(d.warm) byId('warm').value=d.warm;
        if(d.webhook) byId('webhook').value=d.webhook; if(d.bot) byId('bot').value=d.bot; if(d.chat) byId('chat').value=d.chat;
      }catch(e){}
    }

    function toast(msg){
      const t=document.createElement('div');
      t.textContent=msg; t.style.cssText=`position:fixed;bottom:20px;right:20px;background:#111;border:1px solid #333;padding:10px 14px;border-radius:12px;color:#fff;box-shadow:0 0 12px #000;z-index:9999`;
      document.body.appendChild(t); setTimeout(()=>t.remove(),2000);
    }

    // -------------------------- LOCAL AI CORE -------------------------
    // Parses numbers from free text
    function parseHistory(str){
      const arr=(str||'').split(/[^0-9]+/).filter(Boolean).map(s=>parseInt(s)%10);
      return arr.slice(-200); // cap
    }

    function freqScores(hist){
      const f=Array(10).fill(0); hist.forEach(n=>f[n]++);
      const max=Math.max(1,...f); return f.map(x=>x/max);
    }

    function recentBias(hist){
      // Higher weight to last 5 numbers
      const w=[5,4,3,2,1]; const s=Array(10).fill(0);
      for(let i=0;i<Math.min(hist.length,5);i++){ s[hist.length-1-i] }
      const last=Math.min(hist.length,12);
      for(let i=0;i<last;i++){
        const n=hist[hist.length-1-i]; s[n]+= (last-i)/last; // linear decay
      }
      const m=Math.max(1,...s); return s.map(v=>v/m);
    }

    function streakScores(hist){
      // Reward breaking too-long streaks and following short streaks
      if(hist.length<2) return Array(10).fill(0);
      const last=hist[hist.length-1];
      let len=1; for(let i=hist.length-2;i>=0 && hist[i]===last;i--) len++;
      const s=Array(10).fill(0);
      const follow = len<=2 ? 1 : -1; // encourage repeat for short streaks; otherwise discourage
      s[last]=follow;
      // Encourage neighbors if long gaps
      return normalize01(s);
    }

    function markovScores(hist){
      // First-order transition probabilities
      const M=Array.from({length:10},()=>Array(10).fill(0));
      for(let i=1;i<hist.length;i++){ M[hist[i-1]][hist[i]]++; }
      const last=hist[hist.length-1]; if(last==null) return Array(10).fill(0);
      const row=M[last], max=Math.max(1,...row); return row.map(v=>v/max);
    }

    function normalize01(arr){
      const min=Math.min(...arr), max=Math.max(...arr);
      const d=max-min || 1; return arr.map(v=> (v-min)/d );
    }

    function ensembleScore(hist, weights){
      const A=freqScores(hist);
      const B=markovScores(hist);
      const C=streakScores(hist);
      const D=recentBias(hist);
      const w=weights||{freq:1.2,mark:1.4,streak:0.8,recent:1.0};
      const S=Array(10).fill(0).map((_,i)=> A[i]*w.freq + B[i]*w.mark + C[i]*w.streak + D[i]*w.recent );
      // Softmax-like normalization
      const m=Math.max(...S), ex=S.map(x=>Math.exp(x-m));
      const sum=ex.reduce((a,b)=>a+b,0);
      return ex.map(x=>x/sum);
    }

    function sizeOf(n){ return n>=5 ? 'BIG' : 'SMALL'; }
    function colorOf(n){ return (n%2===0)? 'RED' : 'GREEN'; }

    function explainStrategy(hist, prob){
      const top=prob.map((p,i)=>[i,p]).sort((a,b)=>b[1]-a[1]).slice(0,3);
      const last=hist.at(-1);
      return `Top candidates: ${top.map(([i,p])=>`${i} (${(p*100).toFixed(1)}%)`).join(', ')}. Last seen: ${last ?? 'NA'}.`;
    }

    function improvedPredictFromHistory(histStr, weights){
      const hist=parseHistory(histStr);
      const prob= ensembleScore(hist, weights);
      const bestIndex = prob.indexOf(Math.max(...prob));
      const conf = Math.round((Math.max(...prob))*100*0.85 + 10); // calibrated range
      return {
        number: bestIndex,
        size: sizeOf(bestIndex),
        color: colorOf(bestIndex),
        confidence: Math.max(50, Math.min(99, conf)),
        meta: { prob, strategy: explainStrategy(hist, prob), hist }
      };
    }

    // -------------------------- API BRIDGE ---------------------------
    async function fetchFromAPI(base, period, product){
      const url = `${base.replace(/\/$/,'')}/api/getPrediction?period=${encodeURIComponent(period)}&product=${encodeURIComponent(product)}`;
      const res = await fetch(url); if(!res.ok) throw new Error('API error');
      const j = await res.json();
      // Expected server shape: { period, product, result:{digit,size,color,confidence}, meta }
      return j;
    }

    // -------------------------- UI BINDINGS --------------------------
    function renderResult(r){
      const resultBox = byId('resultBox');
      const sizePill = r.size==='BIG'? 'pill big':'pill small';
      const colorPill = r.color==='RED'? 'pill red':'pill green';
      resultBox.innerHTML = `
        <div class="row" style="align-items:center;gap:14px;flex-wrap:nowrap">
          <div style="font-size:26px;font-weight:800;color:var(--gold)">üî¢ ${r.number ?? r.result?.digit ?? '-'} </div>
          <span class="${sizePill}">üìè ${r.size || r.result?.size}</span>
          <span class="${colorPill}">üé® ${r.color || r.result?.color}</span>
          <span class="pill" style="background:#1a1400;color:#ffecb3">üß† Confidence: ${(r.confidence || r.result?.confidence || 0)}%</span>
        </div>
        <div class="mini" style="margin-top:10px">${r.meta?.strategy || r.strategy || ''}</div>
      `;
      resultBox.style.display='block';
    }

    function drawFreqChart(hist){
      const el = byId('freqChart'); el.innerHTML='';
      const H=parseHistory(hist); const f=Array(10).fill(0); H.forEach(n=>f[n]++);
      const max=Math.max(1,...f);
      const wrap=document.createElement('div'); wrap.style.cssText='display:flex;gap:6px;align-items:flex-end;height:140px';
      f.forEach((v,i)=>{
        const bar=document.createElement('div');
        bar.style.cssText=`flex:1;background:linear-gradient(180deg,#ffec80,#ffb300);height:${(v/max*100)||2}%;border-radius:6px 6px 0 0;position:relative`;
        const cap=document.createElement('div'); cap.textContent=i; cap.style.cssText='position:absolute;bottom:-20px;left:50%;transform:translateX(-50%);font-size:12px;color:#ccc';
        const val=document.createElement('div'); val.textContent=v; val.style.cssText='position:absolute;top:-18px;left:50%;transform:translateX(-50%);font-size:11px;color:#aaa';
        bar.appendChild(val); bar.appendChild(cap); wrap.appendChild(bar);
      });
      el.appendChild(wrap);
    }

    // ---------------------------- ACTIONS ----------------------------
    let lastPrediction = null;

    async function handlePredict(){
      const thinking=byId('thinking'); thinking.style.display='block';
      byId('resultBox').style.display='none';
      const base=byId('apiBase').value.trim();
      const period=byId('period').value.trim();
      const product=byId('product').value;
      const weights={freq:+byId('wFreq').value,mark:+byId('wMark').value,streak:+byId('wStreak').value,recent:+byId('wRecent').value};
      try{
        let r;
        if(base){
          r = await fetchFromAPI(base, period||'auto', product);
          // Normalize to UI schema
          r = { number: r?.result?.digit, size:r?.result?.size, color:r?.result?.color, confidence:r?.result?.confidence, meta:r?.meta };
        } else {
          r = improvedPredictFromHistory(byId('history').value, weights);
        }
        lastPrediction = { ...r, period, product };
        renderResult(r);
      } catch(e){ toast('‚ö†Ô∏è '+(e.message||'Prediction failed')); }
      finally{ thinking.style.display='none'; }
    }

    async function handleBulk(){
      const R=+byId('rounds').value; const W=+byId('warm').value; const hist=parseHistory(byId('history').value);
      if(hist.length<5){ return toast('‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 5 ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡•á‡§Ç'); }
      const tbody=byId('historyTable').querySelector('tbody'); tbody.innerHTML='';
      const weights={freq:+byId('wFreq').value,mark:+byId('wMark').value,streak:+byId('wStreak').value,recent:+byId('wRecent').value};
      const prog=byId('progBar'); prog.style.width='0%';
      let cur=[...hist.slice(-W)];
      for(let i=0;i<R;i++){
        const r=improvedPredictFromHistory(cur.join(' '), weights);
        // pseudo advance: append predicted digit as if next result (for forward simulation)
        cur.push(r.number); if(cur.length>200) cur.shift();
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${i+1}</td><td>${byId('period').value||'-'}</td><td>${byId('product').value}</td>
        <td>${r.number}</td>
        <td><span class="${r.size==='BIG'?'pill big':'pill small'}">${r.size}</span></td>
        <td><span class="${r.color==='RED'?'pill red':'pill green'}">${r.color}</span></td>
        <td>${r.confidence}%</td>
        <td class="mini">${r.meta.strategy}</td>`;
        tbody.appendChild(tr);
        prog.style.width = `${((i+1)/R*100).toFixed(1)}%`;
        await new Promise(r=>setTimeout(r,30));
      }
      byId('btSummary').textContent = `Generated ${R} steps using warmup ${W}.`;
    }

    async function handleSendTG(){
      if(!lastPrediction){ return toast('‡§™‡§π‡§≤‡•á prediction ‡§¨‡§®‡§æ‡§è‡§Ç'); }
      const url=byId('webhook').value.trim(); const token=byId('bot').value.trim(); const chat=byId('chat').value.trim();
      if(!url||!token||!chat) return toast('Webhook URL, token, chat ID ‡§≠‡§∞‡•á‡§Ç');
      const payload={ token, chatId:chat, text:`Prediction: ${lastPrediction.number} | ${lastPrediction.size} | ${lastPrediction.color} (${lastPrediction.confidence}%)` };
      try{
        const res=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
        byId('tgStatus').textContent = res.ok? '‚úÖ Sent' : '‚ùå Failed';
      }catch(e){ byId('tgStatus').textContent='‚ùå Error'; }
    }

    // ---------------------------- HOOK UP ----------------------------
    byId('btnPredict').addEventListener('click', handlePredict);
    byId('btnGenerate').addEventListener('click', handleBulk);
    byId('btnClear').addEventListener('click', ()=>{ byId('history').value=''; drawFreqChart(''); });
    byId('btnClearHist').addEventListener('click', ()=>{ byId('historyTable').querySelector('tbody').innerHTML=''; });
    byId('btnSave').addEventListener('click', saveLocal);

    ['history','wFreq','wMark','wStreak','wRecent'].forEach(id=>{
      byId(id).addEventListener('input',()=> drawFreqChart(byId('history').value));
    });

    loadLocal();
    drawFreqChart(byId('history').value);
  </script></body>
</html>
