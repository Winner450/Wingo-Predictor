<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WinGo Predictor Pro • BDG WIN Theme</title>
<meta name="theme-color" content="#1a1f27"/>

<!--
  WinGo Predictor Pro — BDG WIN style (Green/Violet/Red + Gold)
  Single-file: HTML + CSS + JS (no external libs)
  Features kept from your last build:
   - Live API loader (GitHub Raw or any HTTPS JSON)
   - Strategy / High-threshold (Balanced / Conservative / Aggressive / Custom)
   - Auto-Refresh (Off / 10s / 30s / 60s / 5m)
   - Deterministic "Check by Period" (hash based — stable, not random)
   - Probability (0–9) bars + spark canvas
   - Recent Predictions list
   - Patterns (Big/Small, Green/Red), Hot/Cold, Gap heatmap
   - Stats (MM rate, Avg conf, Top digit, Distribution chart)
  Theme notes:
   - Base dark: #1a1f27 / #12161c
   - Gold header/button accents
   - Action buttons: Green / Violet / Red
   - Rounded, glossy BDG-like cards
-->

<style>
/* ===== Root palette (BDG-like) ===== */
:root{
  --bg:#151a21;
  --bg-2:#0f1318;
  --panel:#1a1f27;
  --panel-2:#181d25;
  --panel-3:#11161d;
  --text:#f1f6ff;
  --muted:#9db2ce;
  --outline:rgba(255,255,255,.06);
  --shadow:0 18px 50px rgba(0,0,0,.45);

  --gold-1:#ffe9a3;
  --gold-2:#f6c44b;
  --gold-3:#f0a800;

  --green:#18c26e;
  --green-2:#0faa5d;
  --red:#e84d4d;
  --red-2:#cf4141;
  --violet:#8b5cf6;
  --violet-2:#6d3ff0;

  --teal:#19cbb6;
  --cyan:#1bb0f1;

  --r-xl:20px;
  --r-lg:16px;
  --r-md:12px;
  --r-sm:10px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  color:var(--text);
  background:
    radial-gradient(1200px 680px at 70% -10%, #233146 0%, var(--bg) 55%, #0c1118 100%),
    linear-gradient(180deg, #0b0f14 0%, #080c10 100%);
  font-family: Inter, Segoe UI, system-ui, -apple-system, sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
a{color:inherit;text-decoration:none}
.container{max-width:1180px;margin:18px auto;padding:0 14px}

/* ===== Header (BDG gold pill) ===== */
.header{
  position:relative; overflow:hidden; border-radius:999px; padding:14px 16px;
  text-align:center; margin-bottom:14px; color:#2e2300; font-weight:900; letter-spacing:.35px;
  background:
    linear-gradient(180deg, var(--gold-1), var(--gold-2) 55%, var(--gold-3));
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.65),
    0 10px 40px rgba(240,180,40,.35);
}
.header .dot{
  width:11px;height:11px;border-radius:50%;
  display:inline-block;margin-right:8px;vertical-align:middle;
  background:#32270b;border:2px solid #735a16aa;box-shadow:0 0 0 3px rgba(0,0,0,.12)
}
.header .shine{
  position:absolute;inset:0;opacity:.18;pointer-events:none;mix-blend-mode:screen;
  background:url("https://media.giphy.com/media/l0HlGJcX4zFbhWgW8/giphy.gif") center/cover no-repeat;
}

/* ===== Cards ===== */
.card{
  background:linear-gradient(180deg,var(--panel) 0%,var(--panel-2) 100%);
  border:1px solid var(--outline); border-radius:var(--r-xl); padding:14px; margin-bottom:12px;
  box-shadow:var(--shadow);
}
.card h3{
  margin:0 0 8px; font-size:1.02rem; color:#e7f0ff; display:flex; align-items:center; gap:8px;
}
.card .sub{color:var(--muted);font-size:.88rem}

/* ===== Inputs / Buttons ===== */
.label{color:#c7d7ee;font-size:.9rem;margin:2px 2px 6px}
.note{color:#9eb4cf;font-size:.86rem}
.mono{font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}

.input, .select, .btn{
  width:100%; border-radius:12px; padding:10px 12px; outline:none;
  border:1px solid var(--outline); background:#0e141c; color:var(--text);
  transition:.18s border,.18s box-shadow,.18s transform;
}
.input::placeholder{color:#7e92ad}
.select{appearance:none;background:
  linear-gradient(180deg,#0f1620,#0b1118)}
.btn{cursor:pointer;border:none;font-weight:900;letter-spacing:.2px;color:#0f1318}
.btn:active{transform:translateY(1px)}

/* BDG buttons */
.btn.green{background:linear-gradient(180deg,var(--green),var(--green-2)); color:#02120b; box-shadow:0 6px 18px rgba(24,194,110,.28)}
.btn.violet{background:linear-gradient(180deg,var(--violet),var(--violet-2)); box-shadow:0 6px 18px rgba(139,92,246,.28)}
.btn.red{background:linear-gradient(180deg,var(--red),var(--red-2)); box-shadow:0 6px 18px rgba(232,77,77,.28)}
.btn.gold{background:linear-gradient(180deg,var(--gold-1),var(--gold-2)); color:#2c2100; box-shadow:0 6px 18px rgba(240,180,40,.35)}

.btn.ghost{background:linear-gradient(180deg,#0f1620,#0b1118);border:1px solid var(--outline);color:#dce9ff}

/* ===== Grid ===== */
.row{display:flex;gap:10px;flex-wrap:wrap}
.grid2{display:grid;grid-template-columns:1.35fr .9fr;gap:10px}
@media (max-width:840px){.grid2{grid-template-columns:1fr}}

/* ===== Pills / Chips ===== */
.pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:#0c131b;border:1px solid var(--outline);font-weight:800}
.chip{border-radius:999px;padding:4px 10px;font-size:.82rem;font-weight:900;display:inline-flex;align-items:center;gap:6px}
.chip.soft{color:#21d6bd;background:rgba(33,214,189,.12);border:1px solid rgba(33,214,189,.35)}
.chip.money{color:#ffd86b;background:rgba(255,216,107,.14);border:1px solid rgba(255,216,107,.35)}
.chip.risk{color:#ff9c9c;background:rgba(255,156,156,.12);border:1px solid rgba(255,156,156,.35)}

/* ===== Tabs ===== */
.tabs{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin:10px 0 6px}
.tab-btn{padding:12px;text-align:center;border-radius:14px;border:1px solid var(--outline);background:#0f161f;cursor:pointer;font-weight:900}
.tab-btn.active{background:#0f1d2a;border-color:#26dcc1;box-shadow:0 0 0 3px rgba(38,220,193,.28) inset}
.tab-pane{display:none;animation:fade .18s ease}
.tab-pane.active{display:block}
@keyframes fade{from{opacity:.5;transform:translateY(4px)}to{opacity:1;transform:none}}

/* ===== Probability ===== */
.bars{display:grid;grid-template-columns:repeat(10,1fr);gap:8px;height:180px;align-items:end;margin:8px 0}
.bar{position:relative;border-radius:12px;background:#0b1824;border:1px solid #0f2736;overflow:hidden}
.bar-fill{position:absolute;left:0;right:0;bottom:0;background:linear-gradient(180deg,#20d8be,#1ab0f3)}
.bar small{position:absolute;bottom:-18px;width:100%;text-align:center;color:#9cb6d3}
.canvas{background:#0a1420;border:1px solid var(--outline);border-radius:14px;padding:8px}

/* ===== Prediction rows ===== */
.pred-row{
  display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:center;
  background:linear-gradient(180deg,#121923,#0f141c 70%);border:1px solid var(--outline);
  border-radius:14px;padding:10px 12px;margin-bottom:8px
}

/* ===== Pattern pills ===== */
.pattern-line{display:flex;flex-wrap:wrap;gap:8px}
.p-pill{padding:6px 10px;border-radius:999px;font-weight:900;border:1px solid var(--outline);background:#0c141f}
.p-bg{color:#ffd96f} .p-sm{color:#7fb1ff}
.p-green{color:#9ff1c8} .p-red{color:#ffbbbb}

/* ===== Stats ===== */
.stat-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
@media (max-width:980px){.stat-grid{grid-template-columns:repeat(2,1fr)}}
.stat{padding:12px;border-radius:14px;background:#111923;border:1px solid var(--outline)}
.stat h4{margin:0;font-size:.95rem;color:#d8e7ff}
.stat .v{font-size:1.3rem;font-weight:900;margin-top:6px}
.progress{height:8px;border-radius:999px;background:#0b1218;border:1px solid #0e1b25;overflow:hidden}
.progress > span{display:block;height:100%;background:linear-gradient(90deg,#20d8be,#1ab0f3)}

/* ===== Footer / Toast ===== */
.kbd{display:inline-block;border:1px solid var(--outline);border-bottom-width:2px;border-radius:6px;padding:2px 6px;background:#0c151f;font-weight:900}
.foot{color:#98b0cf;font-size:.9rem;margin:16px 0 36px}

.toast{
  position:fixed;left:50%;translate:-50% 0;bottom:16px;z-index:30;
  background:#0f161f;border:1px solid var(--outline);padding:10px 14px;border-radius:12px;
  box-shadow:var(--shadow);display:flex;gap:10px;align-items:center
}
.hidden{display:none}
</style>
</head>
<body>
<div class="container">

  <!-- ===== Header ===== -->
  <div class="header">
    <span class="shine"></span>
    <span class="dot"></span>
    <span>BDG WIN • WINGO PREDICTOR PRO</span>
  </div>

  <!-- ===== Controls ===== -->
  <div class="card">
    <h3>⚙️ Controls</h3>
    <div class="grid2">
      <div>
        <div class="label">LIVE_API_URL (GitHub Raw / HTTPS JSON)</div>
        <input id="apiUrl" class="input mono" placeholder="https://raw.githubusercontent.com/you/repo/branch/data.json"/>
      </div>
      <div class="row" style="align-items:flex-end">
        <button id="btnConnect" class="btn gold" style="min-width:160px">Connect API</button>
        <button id="btnSample" class="btn ghost">Load Sample</button>
      </div>
    </div>

    <div class="row" style="margin-top:8px">
      <div style="flex:1 1 240px">
        <div class="label">Strategy</div>
        <select id="strategy" class="select">
          <option value="balanced" selected>Balanced (⭐ High≥0.75)</option>
          <option value="conservative">Conservative (⭐ High≥0.82)</option>
          <option value="aggressive">Aggressive (⭐ High≥0.68)</option>
          <option value="custom">Custom…</option>
        </select>
      </div>
      <div style="flex:1 1 180px">
        <div class="label">Custom High Threshold (0.50–0.95)</div>
        <input id="thHigh" class="input" type="number" min="0.5" max="0.95" step="0.01" value="0.75"/>
      </div>
      <div style="flex:1 1 160px">
        <div class="label">Auto-Refresh</div>
        <select id="autoRefresh" class="select">
          <option value="0" selected>Off</option>
          <option value="10">Every 10s</option>
          <option value="30">Every 30s</option>
          <option value="60">Every 60s</option>
          <option value="300">Every 5m</option>
        </select>
      </div>
      <div style="flex:0 0 140px;align-self:flex-end">
        <button id="btnApply" class="btn green" style="width:100%">Apply</button>
      </div>
      <div class="pill" style="flex:1 1 160px;align-self:flex-end;justify-content:center">
        Live: <strong id="liveState">Off</strong>
      </div>
    </div>
    <div class="note" style="margin-top:6px">
      Tip: GitHub raw JSON दें; missing fields होने पर ऐप स्वतः सुरक्षित वैल्यू compute करेगा (deterministic).
    </div>
  </div>

  <!-- ===== Check by Period ===== -->
  <div class="card">
    <h3>🔍 Check by Period</h3>
    <div class="row">
      <input id="periodInput" class="input mono" placeholder="Enter Period Number"/>
      <button id="btnCheck" class="btn violet" style="min-width:140px">Check</button>
      <button id="btnColorG" class="btn green"  style="min-width:120px">Green</button>
      <button id="btnColorV" class="btn violet" style="min-width:120px">Violet</button>
      <button id="btnColorR" class="btn red"    style="min-width:120px">Red</button>
    </div>
    <div id="periodError" class="note" style="color:var(--red);margin-top:8px;display:none"></div>

    <div class="grid2" style="margin-top:10px">
      <div class="card" style="margin:0">
        <h3>Result</h3>
        <div class="row"><div class="label" style="min-width:120px">Input</div><div class="mono" id="res-input">—</div></div>
        <div class="row"><div class="label" style="min-width:120px">Using period</div><div class="mono" id="res-period">—</div></div>
        <div class="row"><div class="label" style="min-width:120px">Digit</div><div class="mono" id="res-digit">—</div></div>
        <div class="row"><div class="label" style="min-width:120px">Type</div><div class="mono" id="res-type">—</div></div>
        <div class="row"><div class="label" style="min-width:120px">Color</div><div class="mono" id="res-color">—</div></div>
        <div class="row"><div class="label" style="min-width:120px">Confidence</div><div class="mono" id="res-conf">—</div></div>
        <div class="row"><div class="label" style="min-width:120px">Decision</div><div id="res-decision" class="chip">—</div></div>
      </div>
      <div class="card" style="margin:0">
        <h3>About</h3>
        <div class="note">
          • Period string → stable hash → <b>digit (0–9)</b>.<br/>
          • digit ≥5 ⇒ <b>Big</b>, else <b>Small</b>.<br/>
          • Parity मिक्स से <b>Green/Red</b> तय; Violet आप खुद टॉगल बटन से चुन सकते हैं।<br/>
          • Confidence = hash entropy + history context + strategy threshold.<br/>
          • Decision: High<threshold ⇒ <span class="chip soft">Soft 💚</span>, High≥threshold ⇒ <span class="chip money">Money Magnet 🧲</span>.
        </div>
      </div>
    </div>
  </div>

  <!-- ===== Tabs ===== -->
  <div class="tabs">
    <div class="tab-btn active" data-tab="tab-prob">Probability</div>
    <div class="tab-btn" data-tab="tab-preds">Predictions</div>
    <div class="tab-btn" data-tab="tab-patterns">Patterns</div>
    <div class="tab-btn" data-tab="tab-stats">Stats</div>
  </div>

  <!-- ===== Probability ===== -->
  <div id="tab-prob" class="tab-pane active">
    <div class="card">
      <h3>📊 Probability (0–9) <span class="sub" id="probSource">(from history)</span></h3>
      <div class="bars" id="probBars"></div>
      <div class="row">
        <div class="note">Top: <span id="probTop" class="mono">—</span></div>
        <div class="note">Bottom: <span id="probBottom" class="mono">—</span></div>
      </div>
      <div class="canvas"><canvas id="probCanvas" height="160"></canvas></div>
      <div class="note" style="margin-top:6px">Bar heights API / Sample history पर depend करते हैं।</div>
    </div>
  </div>

  <!-- ===== Predictions ===== -->
  <div id="tab-preds" class="tab-pane">
    <div class="card">
      <h3>🕒 Recent Predictions</h3>
      <div id="predList"></div>
    </div>
  </div>

  <!-- ===== Patterns ===== -->
  <div id="tab-patterns" class="tab-pane">
    <div class="card">
      <h3>🧩 Pattern (Big/Small)</h3>
      <div id="patBS" class="pattern-line"></div>
    </div>
    <div class="card">
      <h3>🟢🔴 Pattern (Green/Red)</h3>
      <div id="patCR" class="pattern-line"></div>
    </div>
    <div class="row">
      <div class="card" style="flex:1">
        <h3>🔥 Hot Numbers</h3>
        <div id="hotList" class="pattern-line"></div>
      </div>
      <div class="card" style="flex:1">
        <h3>❄️ Cold Numbers</h3>
        <div id="coldList" class="pattern-line"></div>
      </div>
    </div>
    <div class="card">
      <h3>📍 Gap Heatmap (Last 40)</h3>
      <div id="gapMap" class="pattern-line"></div>
    </div>
  </div>

  <!-- ===== Stats ===== -->
  <div id="tab-stats" class="tab-pane">
    <div class="card">
      <h3>📈 Stats Overview</h3>
      <div class="stat-grid">
        <div class="stat"><h4>Total Records</h4><div class="v mono" id="st-total">—</div></div>
        <div class="stat"><h4>Money Magnet Rate</h4><div class="v mono" id="st-mm">—</div><div class="progress"><span id="st-mm-p" style="width:0%"></span></div></div>
        <div class="stat"><h4>Avg Confidence</h4><div class="v mono" id="st-avg">—</div><div class="progress"><span id="st-avg-p" style="width:0%"></span></div></div>
        <div class="stat"><h4>Top Digit (Hit%)</h4><div class="v mono" id="st-top">—</div></div>
      </div>
    </div>
    <div class="card">
      <h3>📊 Distribution Table</h3>
      <div class="canvas"><canvas id="distCanvas" height="180"></canvas></div>
    </div>
  </div>

  <div class="foot">
    <b>Shortcuts:</b>
    <span class="kbd">/</span> focus period,
    <span class="kbd">r</span> refresh,
    <span class="kbd">a</span> toggle auto-refresh,
    <span class="kbd">1</span>/<span class="kbd">2</span>/<span class="kbd">3</span>/<span class="kbd">4</span> switch tabs.
  </div>
</div>

<!-- ===== Toast ===== -->
<div id="toast" class="toast hidden"><div id="toastText">Loaded</div></div>

<script>
/* ---------- tiny helpers ---------- */
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));
const clamp = (v,min,max)=>Math.max(min,Math.min(max,v));
const toast = (m,ms=1600)=>{const t=$("#toast");$("#toastText").textContent=m;t.classList.remove("hidden");clearTimeout(toast._t);toast._t=setTimeout(()=>t.classList.add("hidden"),ms);};

/* ---------- stable hash / logic ---------- */
function fnv1a(str){ let h=0x811c9dc5>>>0; for(let i=0;i<str.length;i++){ h^=str.charCodeAt(i); h=((h+((h<<1)+(h<<4)+(h<<7)+(h<<8)+(h<<24)))>>>0); } return h>>>0; }
const periodDigit = p => fnv1a(String(p))%10;
function digitColor(d, p){ const h=fnv1a(String(p)); const parity=((h>>>3)^(h>>>7)^(h>>>11))&1; return ((d%2)^parity) ? "Red":"Green"; }
function computeConfidence(d, p, hist){
  const base = 0.62 + ((fnv1a(String(p)+"#"+d)&1023)/1023)*0.28;
  let penalty=0;
  if(hist&&hist.length){
    const idx=hist.findIndex(x=>x.num===d);
    const rec=(idx===-1)?30:Math.max(1,idx);
    penalty = (rec<5)?0.05 : (rec<10?0.02:-0.02);
  }
  return clamp(base-penalty, .55, .93);
}
const strategies={balanced:{high:.75},conservative:{high:.82},aggressive:{high:.68},custom:{high:.75}};

/* ---------- state ---------- */
const state={apiUrl:"",autoRefresh:0,timer:null,strategy:"balanced",high:strategies.balanced.high,history:[],probs:new Array(10).fill(0)};

/* ---------- normalize incoming ---------- */
function normalizeHistory(arr){
  const out=[];
  (arr||[]).forEach((r,i)=>{
    const period=r.period ?? (1000+i);
    const num = Number.isInteger(r.num)? clamp(r.num,0,9) : periodDigit(period);
    const type=r.type ?? (num>=5?"Big":"Small");
    const color=r.color ?? digitColor(num,period);
    const conf=(typeof r.confidence==="number")? clamp(r.confidence,.5,.95) : computeConfidence(num,period,out);
    const ts=r.ts ?? (Date.now()-i*60000);
    out.push({period,num,type,color,confidence:conf,ts});
  });
  return out;
}

/* ---------- fetch ---------- */
async function fetchApi(url){
  const res=await fetch(url,{cache:"no-store"});
  if(!res.ok) throw new Error(res.status+" "+res.statusText);
  return await res.json();
}

/* ---------- controls ---------- */
function bindControls(){
  $("#btnConnect").addEventListener("click", async ()=>{
    const url=$("#apiUrl").value.trim(); if(!url){toast("Paste LIVE_API_URL"); return;}
    try{
      toast("Fetching…");
      const json=await fetchApi(url);
      state.history=normalizeHistory(json.history||json||[]);
      updateProbabilities(); renderAll();
      $("#probSource").textContent="(from API)";
      toast("API connected ✓");
    }catch(e){console.error(e); toast("Failed to load API");}
  });

  $("#btnSample").addEventListener("click", ()=>{
    const sample={history:[
      {period:1440,num:6,confidence:.76},
      {period:1439,num:4,confidence:.66},
      {period:1438,num:9,confidence:.81},
      {period:1437,num:0,confidence:.61},
      {period:1436,num:3,confidence:.72},
      {period:1435,num:8,confidence:.78},
      {period:1434,num:5,confidence:.73},
      {period:1433,num:2,confidence:.69},
      {period:1432,num:7,confidence:.86},
      {period:1431,num:1,confidence:.64},
      {period:1430,num:8,confidence:.77},
      {period:1429,num:0,confidence:.59},
      {period:1428,num:8,confidence:.68},
      {period:1427,num:2,confidence:.71},
      {period:1426,num:5,confidence:.80},
      {period:1425,num:4,confidence:.58},
      {period:1424,num:6,confidence:.73},
      {period:1423,num:7,confidence:.88},
      {period:1422,num:3,confidence:.69},
      {period:1421,num:9,confidence:.83}
    ]};
    state.history=normalizeHistory(sample.history);
    updateProbabilities(); renderAll();
    $("#probSource").textContent="(from sample)";
    toast("Sample loaded ✓");
  });

  $("#btnApply").addEventListener("click", ()=>{
    state.strategy=$("#strategy").value;
    const th=parseFloat($("#thHigh").value)||strategies[state.strategy].high;
    state.high=clamp(th,.5,.95);
    const ar=parseInt($("#autoRefresh").value,10)||0;
    setAutoRefresh(ar); render
