<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>üéØ WinGo Predictor Pro</title>
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#000000">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root{
  --gold:#ffd700; --gold-2:#f5d46b; --ink:#e5e7eb; --muted:#9ca3af;
  --card:#14161b; --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444;
  --radius:16px; --shadow:0 12px 26px rgba(0,0,0,.35);
}
body{margin:0;background:linear-gradient(160deg,#0b0b0f,#000);color:#fff;font:16px/1.45 ui-sans-serif}
header{position:sticky;top:0;background:#000;border-bottom:1px solid #0f1117}
.bar{max-width:1180px;margin:auto;display:flex;align-items:center;justify-content:space-between;padding:14px}
.logo{font-weight:900;font-size:20px;color:var(--gold);white-space:nowrap}
.container{max-width:1180px;margin:auto;padding:18px}
.card{background:var(--card);border-radius:var(--radius);padding:16px;margin-bottom:14px}
.h1{font-size:18px;font-weight:800}
.btn{background:linear-gradient(180deg,var(--gold),var(--gold-2));color:#000;font-weight:800;border-radius:12px;padding:12px 18px;cursor:pointer;border:none}
.history{font-size:12px;max-height:220px;overflow:auto;color:#cfd4e1}
</style>
</head>
<body>
<header>
  <div class="bar">
    <div class="logo">üéØ WinGo Predictor Pro</div>
    <label><input type="checkbox" id="autoNext"> Auto Mode</label>
  </div>
</header>

<div class="container">
  <div class="card">
    <div class="h1">Quick Predict</div>
    <input id="period" placeholder="Enter Period ID" style="width:100%;padding:10px;border-radius:8px;margin:8px 0">
    <button class="btn" id="btnPredict">üîÆ Predict</button>
    <audio id="soundPredict" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg"></audio>
  </div>

  <div class="card">
    <div class="h1">Verify & Learn</div>
    <label><input type="radio" name="actSize" value="small"> Small</label>
    <label><input type="radio" name="actSize" value="big"> Big</label>
    <button class="btn" id="btnVerify">Verify</button>
    <span id="verifyMsg">‚Äî</span>
    <audio id="soundWin" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
    <audio id="soundLoss" src="https://actions.google.com/sounds/v1/cartoon/cartoon_boing.ogg"></audio>
  </div>

  <div class="card">
    <div class="h1">Result</div>
    <div id="result">‚Äî</div>
  </div>

  <div class="card">
    <div class="h1">Recent Predictions</div>
    <div id="hist" class="history">‚Äî</div>
  </div>
</div>

<script>
// Notification Permission
async function ensureNotifyPerm(){
  if(!('Notification' in window)) return false;
  if(Notification.permission==='granted') return true;
  if(Notification.permission==='denied') return false;
  return (await Notification.requestPermission())==='granted';
}
function notifyUser(msg){
  ensureNotifyPerm().then(ok=>{ if(ok) new Notification('Prediction', {body: msg}); });
}

// Learning Data
const LS_SIZE='WPP_SIZE2';
const loadSize=()=>JSON.parse(localStorage.getItem(LS_SIZE)||'[1,1]');
const saveSize=s=>localStorage.setItem(LS_SIZE,JSON.stringify(s));

// Pattern Based Prediction
function predict(period){
  if(!/^\d+$/.test(period)) return {pick:Math.floor(Math.random()*10), size:'small'};
  const digits=period.split('').map(Number);
  const sum=digits.reduce((a,b)=>a+b,0);
  const reverse=Number(String(period).split('').reverse().join(''))%10;
  const mirror=(9-digits[digits.length-1]);
  const cont=(digits[digits.length-1]+1)%10;
  const score=[sum%10,reverse,mirror,cont];
  const pick=score[Math.floor(Math.random()*score.length)];
  return {pick, size: pick>=5?'big':'small'};
}

// Render Result
function renderResult(period,res){
  document.getElementById('result').textContent=`Period: ${period} ‚Ä¢ #${res.pick} (${res.size.toUpperCase()})`;
  const hist=document.getElementById('hist');
  if(hist.textContent==='‚Äî') hist.textContent='';
  hist.insertAdjacentHTML('afterbegin',`<div>‚è± ${new Date().toLocaleTimeString()} ‚Üí ${res.pick} (${res.size})</div>`);
  notifyUser(`#${res.pick} ‚Ä¢ ${res.size.toUpperCase()}`);
  document.getElementById('soundPredict').play();
}

// Bind
document.getElementById('btnPredict').addEventListener('click',()=>{
  const period=document.getElementById('period').value.trim();
  const res=predict(period);
  renderResult(period,res);
});

document.getElementById('btnVerify').addEventListener('click',()=>{
  const pick=document.getElementById('result').textContent.match(/#(\d+)/);
  if(!pick){ document.getElementById('verifyMsg').textContent='‡§™‡§π‡§≤‡•á Predict ‡§ï‡§∞‡•ã'; return; }
  const chosen=document.querySelector('input[name="actSize"]:checked');
  if(!chosen){ document.getElementById('verifyMsg').textContent='Actual Size ‡§ö‡•Å‡§®‡•ã'; return; }
  const predictedSize=+pick[1]>=5?'big':'small';
  const actualSize=chosen.value;
  if(predictedSize===actualSize){
    document.getElementById('verifyMsg').textContent='WIN ‚úî';
    document.getElementById('soundWin').play();
    const s=loadSize(); if(actualSize==='small') s[0]++; else s[1]++; saveSize(s);
  }else{
    document.getElementById('verifyMsg').textContent='LOSS ‚úò';
    document.getElementById('soundLoss').play();
    const s=loadSize(); if(actualSize==='small') s[0]++; else s[1]++; saveSize(s);
  }
});

// Auto Mode
let autoTimer=null;
document.getElementById('autoNext').addEventListener('change',e=>{
  clearInterval(autoTimer);
  if(e.target.checked){
    autoTimer=setInterval(()=>{
      const inp=document.getElementById('period');
      inp.value=(BigInt(inp.value||Date.now())+1n).toString();
      const res=predict(inp.value);
      renderResult(inp.value,res);
    },8000);
  }
});
</script>
</body>
</html>
