<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>WinGo Predictor Pro — BDG Premium Theme (Enhanced)</title>
<meta name="theme-color" content="#0b1116" />
<meta name="description" content="Premium WinGo Predictor Pro — BDG-like theme, production-ready single-file dashboard" />
<!-- ======================================================================
   WinGo Predictor Pro — Premium BDG-like single-file
   - Theme: BDG-like gold + deep navy + green/violet/red accents
   - Check button toggles color on touch (default -> yellow toggle)
   - Removed explicit Green/Violet/Red quick buttons (user requested)
   - Auto mode: when enabled, shifts period every 38 seconds and auto-calculates
   - Processing animation includes dollar/spinner icon
   - Deterministic prediction using stable hashing + history-aware scoring
   - Improved confidence calculation (frequency + recency + entropy + smoothing)
   - Lots of UI polish to look premium
   - Single file — drop into index.html and host
   ====================================================================== -->
<style>
/* ===================== Root palette & reset ===================== */
:root{
  --bg:#0b1116;
  --bg-2:#081018;
  --panel:#0f1620;
  --panel-2:#0b1218;
  --panel-3:#061018;
  --muted:#9fb6cf;
  --text:#e9f6ff;
  --accent-teal:#14c2a3;
  --accent-cyan:#13a9ee;
  --accent-violet:#7b56f2;
  --accent-gold-1:#ffeaa7;
  --accent-gold-2:#f6c44b;
  --accent-gold-3:#f0a800;
  --green:#18c26e;
  --red:#ea5050;
  --violet:#8b5cf6;
  --outline: rgba(255,255,255,0.06);
  --shadow: 0 18px 50px rgba(0,0,0,0.6);
  --glass: rgba(255,255,255,0.02);
  --radius-xl: 20px;
  --radius-lg: 14px;
  --radius-md: 10px;
  --glass-border: rgba(255,255,255,0.03);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;padding:0;
  font-family:Inter, "Segoe UI", system-ui, -apple-system, sans-serif;
  background:
    radial-gradient(900px 500px at 20% -10%, rgba(20,34,55,0.18), transparent 10%),
    radial-gradient(900px 500px at 90% 120%, rgba(30,10,20,0.12), transparent 20%),
    linear-gradient(180deg,var(--bg), #04060a 100%);
  color:var(--text);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  -webkit-tap-highlight-color: transparent;
}

/* container */
.container{max-width:1100px;margin:16px auto;padding:0 16px}

/* ===================== header (gold pill) ===================== */
.header{
  display:flex;align-items:center;justify-content:center;
  position:relative;padding:14px 20px;border-radius:999px;
  background:linear-gradient(180deg,var(--accent-gold-1),var(--accent-gold-2) 60%, var(--accent-gold-3));
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.5), 0 12px 40px rgba(240,160,30,0.2);
  margin-bottom:18px;
  font-weight:900;letter-spacing:.3px;color:#201805;
}
.header .hint{
  position:absolute; right:14px; top:50%; transform:translateY(-50%); font-weight:700; opacity:.9; font-size:.9rem;
  color:#241b06;
}
.header .bg-anim{
  position:absolute;inset:0;opacity:.28;pointer-events:none;background:url("https://media.giphy.com/media/l0HlGJcX4zFbhWgW8/giphy.gif") center/cover no-repeat;mix-blend-mode:screen;filter:contrast(110%) saturate(120%);
}

/* ===================== card styles ===================== */
.card{
  background: linear-gradient(180deg,var(--panel) 0%, var(--panel-2) 100%);
  border-radius:var(--radius-xl); border:1px solid var(--outline);
  padding:14px; margin-bottom:14px; box-shadow:var(--shadow);
}
.card h3{margin:0 0 8px;font-size:1.02rem;color:#e7f4ff}
.card .sub{font-size:.88rem;color:var(--muted)}
.label{font-size:.9rem;color:#cfe6ff;margin:6px 0 8px}
.note{color:var(--muted);font-size:.87rem}
.mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, monospace}

/* ===================== inputs & buttons ===================== */
.input, .select {
  width:100%; padding:10px 12px; border-radius:12px; border:1px solid var(--outline);
  background:linear-gradient(180deg,#07121a,#08101a); color:var(--text); outline:none; font-weight:600;
}
.input::placeholder{color:#6f8aa6}
.select{appearance:none;padding:10px 12px}
.btn{padding:10px 12px;border-radius:12px;border:none;cursor:pointer;font-weight:900}
.btn:active{transform:translateY(1px)}
.btn.primary{background:linear-gradient(180deg,var(--accent-cyan),var(--accent-teal)); color:#021013; box-shadow:0 10px 30px rgba(20,190,165,0.15)}
.btn.ghost{background:transparent;border:1px solid var(--outline);color:var(--text)}
.btn.gold{background:linear-gradient(180deg,var(--accent-gold-1),var(--accent-gold-2)); color:#2b1b03}
.btn.neutral{background:linear-gradient(180deg,#0f1824,#0b121a);color:var(--text);border:1px solid var(--outline)}
.btn.warn{background:linear-gradient(180deg,#f6c44b,#f0a800);color:#201505;font-weight:900}
.small{padding:6px 10px;font-size:.88rem}

/* ===================== pills & chips ===================== */
.pill{
  display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:var(--glass);
  border:1px solid var(--glass-border); font-weight:800;
}
.chip{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;font-weight:900}
.chip.soft{color:#14c2a3;background:rgba(20,194,163,0.08);border:1px solid rgba(20,194,163,0.14)}
.chip.money{color:#ffd66b;background:rgba(255,214,107,0.08);border:1px solid rgba(255,214,107,0.12)}
.chip.risk{color:#ff9aa3;background:rgba(255,154,154,0.06);border:1px solid rgba(255,154,154,0.12)}

/* ===================== layout helpers ===================== */
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.grid2{display:grid;grid-template-columns:1.4fr .9fr;gap:12px}
@media (max-width:880px){ .grid2{grid-template-columns:1fr} }

/* ===================== tabs ===================== */
.tabs{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin:10px 0}
.tab-btn{background:linear-gradient(180deg,#0b1520,#071019);border:1px solid var(--outline);border-radius:14px;padding:12px;font-weight:900;cursor:pointer;text-align:center}
.tab-btn.active{box-shadow:inset 0 0 0 4px rgba(20,190,165,0.12);border-color:rgba(20,190,165,0.25)}
.tab-pane{display:none}
.tab-pane.active{display:block}

/* ===================== probability bars ===================== */
.bars{display:grid;grid-template-columns:repeat(10,1fr);gap:8px;height:180px;align-items:end;margin:12px 0}
.bar{position:relative;border-radius:12px;background:linear-gradient(180deg,#071622,#071622);border:1px solid rgba(255,255,255,0.02);overflow:hidden}
.bar-fill{position:absolute;left:0;right:0;bottom:0;background:linear-gradient(180deg,#14c2a3,#13a9ee);box-shadow:inset 0 -6px 18px rgba(255,255,255,0.04)}
.bar small{position:absolute;bottom:-18px;width:100%;text-align:center;color:var(--muted);font-weight:700}

/* ===================== pred rows ===================== */
.pred-row{display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:center;padding:10px;border-radius:12px;background:linear-gradient(180deg,#0b141a,#061017);border:1px solid var(--outline);margin-bottom:8px}

/* ===================== patterns & pills ===================== */
.pattern-line{display:flex;gap:8px;flex-wrap:wrap}
.p-pill{padding:6px 10px;border-radius:999px;background:#07121a;border:1px solid var(--outline);font-weight:900}
.p-bg{color:#ffd96f} .p-sm{color:#7fb1ff}
.p-red{color:#ffb4b4} .p-green{color:#96f7c5}

/* ===================== stats ===================== */
.stat-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
@media (max-width:980px){ .stat-grid{grid-template-columns:repeat(2,1fr)} }
.stat{padding:12px;border-radius:12px;background:linear-gradient(180deg,#06131b,#07121a);border:1px solid var(--outline)}
.stat h4{margin:0;color:#dbeffd}
.stat .v{font-size:1.3rem;font-weight:900;margin-top:6px}
.progress{height:8px;border-radius:999px;background:#071018;border:1px solid #0b2230;overflow:hidden}
.progress > span{display:block;height:100%;background:linear-gradient(90deg,#14c2a3,#13a9ee)}

/* ===================== processing spinner with $ icon ===================== */
.processing{
  display:inline-flex;align-items:center;gap:10px;padding:8px 12px;border-radius:999px;background:linear-gradient(180deg,#0f181e,#071018);border:1px solid var(--outline);
}
.spin{
  width:36px;height:36px;border-radius:50%;display:inline-grid;place-items:center;background:linear-gradient(180deg,#1b2a33,#08121a);
  box-shadow:0 6px 20px rgba(0,0,0,0.6), inset 0 -6px 14px rgba(255,255,255,0.02);
  position:relative;overflow:hidden;
}
.spin::after{
  content:"$";font-weight:900;color:#ffd86b;font-size:18px;transform:translateY(1px);
}
.spin .ring{
  position:absolute;inset:0;border-radius:50%;border:3px solid rgba(255,255,255,0.04); animation:spin 1.2s linear infinite;
}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}

/* ===================== small utilities ===================== */
.kbd{display:inline-block;border:1px solid var(--outline);border-bottom-width:2px;border-radius:6px;padding:2px 6px;background:#071018;font-weight:800}
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:20px;background:#07121a;padding:10px 14px;border-radius:10px;border:1px solid var(--outline);box-shadow:var(--shadow);z-index:9999}
.hidden{display:none}

/* ===================== UI polish for prediction box ===================== */
.result-box{
  background:linear-gradient(180deg,#08131a,#061017); border-radius:14px; padding:12px; border:1px solid var(--outline);
}
.result-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed rgba(255,255,255,0.02)}
.result-row:last-child{border-bottom:0}
.result-key{color:var(--muted);font-weight:700}
.result-val{font-weight:900}

/* ===================== make page taller intentionally (padding) ===================== */
.spacer{height:22px}
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="bg-anim"></div>
      <div class="dot" style="margin-right:12px;width:12px;height:12px;border-radius:50%;background:#081014;border:2px solid rgba(0,0,0,0.2);"></div>
      <div style="font-size:1.06rem;">BDG-style • WINGO PREDICTOR PRO</div>
      <div class="hint">Premium • Production UI</div>
    </div>

    <!-- Controls card -->
    <div class="card">
      <h3>⚙️ Controls</h3>
      <div class="grid2">
        <div>
          <div class="label">LIVE_API_URL (GitHub Raw / HTTPS JSON)</div>
          <input id="apiUrl" class="input mono" placeholder="https://raw.githubusercontent.com/username/repo/branch/data.json" />
        </div>
        <div style="display:flex;align-items:flex-end;gap:8px">
          <button id="btnConnect" class="btn gold">Connect API</button>
          <button id="btnSample" class="btn ghost">Load Sample</button>
        </div>
      </div>

      <div style="margin-top:12px" class="row">
        <div style="flex:1 1 260px">
          <div class="label">Strategy</div>
          <select id="strategy" class="select">
            <option value="balanced" selected>Balanced (⭐ High ≥ 0.75)</option>
            <option value="conservative">Conservative (⭐ High ≥ 0.82)</option>
            <option value="aggressive">Aggressive (⭐ High ≥ 0.68)</option>
            <option value="custom">Custom …</option>
          </select>
        </div>
        <div style="flex:1 1 160px">
          <div class="label">Custom High Threshold (0.50–0.95)</div>
          <input id="thHigh" type="number" min="0.5" max="0.95" step="0.01" class="input" value="0.75"/>
        </div>
        <div style="flex:1 1 160px">
          <div class="label">Auto Mode</div>
          <select id="autoMode" class="select">
            <option value="off" selected>Off</option>
            <option value="38">Auto (every 38s)</option>
            <option value="60">Auto (every 60s)</option>
          </select>
        </div>
        <div style="flex:0 0 140px;align-self:flex-end">
          <button id="btnApply" class="btn primary" style="width:100%">Apply</button>
        </div>
      </div>

      <div class="note" style="margin-top:10px">Tip: अगर आप GitHub raw JSON डालेंगे तो history वहाँ से आएगा — real production context से accuracy बेहतर होगी।</div>
    </div>

    <!-- Check by Period card (with removed Green/Violet/Red buttons) -->
    <div class="card">
      <h3>🔎 Check by Period</h3>

      <div style="display:flex;gap:10px;align-items:center">
        <input id="periodInput" class="input mono" placeholder="Enter Period Number (e.g. 202508141000... or short like 51653)" />
        <button id="btnCheck" class="btn neutral" style="min-width:160px">Check</button>
        <!-- new processing indicator -->
        <div id="procWrap" style="margin-left:auto;display:flex;align-items:center;gap:10px">
          <div id="processing" class="processing hidden">
            <div class="spin" aria-hidden="true"><div class="ring"></div></div>
            <div class="sub">Processing…</div>
          </div>
        </div>
      </div>

      <!-- RESULT BOX -->
      <div style="margin-top:12px" class="result-box">
        <div class="result-row"><div class="result-key">Input</div><div class="result-val mono" id="res-input">—</div></div>
        <div class="result-row"><div class="result-key">Using period</div><div class="result-val mono" id="res-period">—</div></div>
        <div class="result-row"><div class="result-key">Digit</div><div class="result-val mono" id="res-digit">—</div></div>
        <div class="result-row"><div class="result-key">Type</div><div class="result-val mono" id="res-type">—</div></div>
        <div class="result-row"><div class="result-key">Color</div><div class="result-val mono" id="res-color">—</div></div>
        <div class="result-row"><div class="result-key">Confidence</div><div class="result-val mono" id="res-conf">—</div></div>
        <div class="result-row"><div class="result-key">Decision</div><div class="result-val" id="res-decision">—</div></div>
      </div>

      <div style="margin-top:10px" class="note">About: Period string → stable hash → digit (0–9). digit ≥5 ⇒ Big else Small. Color uses parity bits so output varies across periods. Confidence uses a combined history-aware scoring model (explained in code comments).</div>
    </div>

    <!-- tabs -->
    <div class="tabs">
      <div class="tab-btn active" data-tab="tab-prob">Probability</div>
      <div class="tab-btn" data-tab="tab-preds">Predictions</div>
      <div class="tab-btn" data-tab="tab-patterns">Patterns</div>
      <div class="tab-btn" data-tab="tab-stats">Stats</div>
    </div>

    <!-- Probability tab -->
    <div id="tab-prob" class="tab-pane active">
      <div class="card">
        <h3>📊 Probability (0–9) <span class="sub" id="probSource">(from history)</span></h3>
        <div id="probBars" class="bars"></div>

        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
          <div class="note">Top: <span id="probTop" class="mono">—</span></div>
          <div class="note">Bottom: <span id="probBottom" class="mono">—</span></div>
        </div>

        <div style="margin-top:12px" class="canvas">
          <canvas id="probCanvas" height="150" style="width:100%"></canvas>
        </div>
      </div>
    </div>

    <!-- Predictions tab -->
    <div id="tab-preds" class="tab-pane">
      <div class="card">
        <h3>🕒 Recent Predictions</h3>
        <div id="predList"></div>
      </div>
    </div>

    <!-- Patterns tab -->
    <div id="tab-patterns" class="tab-pane">
      <div class="card">
        <h3>🧩 Pattern (Big/Small)</h3>
        <div id="patBS" class="pattern-line"></div>
      </div>

      <div class="card">
        <h3>🟢🔴 Pattern (Color)</h3>
        <div id="patCR" class="pattern-line"></div>
      </div>

      <div class="row">
        <div class="card" style="flex:1">
          <h3>🔥 Hot Numbers</h3>
          <div id="hotList" class="pattern-line"></div>
        </div>
        <div class="card" style="flex:1">
          <h3>❄️ Cold Numbers</h3>
          <div id="coldList" class="pattern-line"></div>
        </div>
      </div>

      <div class="card">
        <h3>📍 Gap Heatmap (Last 40)</h3>
        <div id="gapMap" class="pattern-line"></div>
      </div>
    </div>

    <!-- Stats tab -->
    <div id="tab-stats" class="tab-pane">
      <div class="card">
        <h3>📈 Stats Overview</h3>
        <div class="stat-grid">
          <div class="stat">
            <h4>Total Records</h4>
            <div class="v mono" id="st-total">—</div>
          </div>
          <div class="stat">
            <h4>Money Magnet Rate</h4>
            <div class="v mono" id="st-mm">—</div>
            <div class="progress"><span id="st-mm-p" style="width:0%"></span></div>
          </div>
          <div class="stat">
            <h4>Avg Confidence</h4>
            <div class="v mono" id="st-avg">—</div>
            <div class="progress"><span id="st-avg-p" style="width:0%"></span></div>
          </div>
          <div class="stat">
            <h4>Top Digit (Hit%)</h4>
            <div class="v mono" id="st-top">—</div>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>📊 Distribution</h3>
        <div class="canvas"><canvas id="distCanvas" height="180" style="width:100%"></canvas></div>
      </div>
    </div>

    <div style="height:40px"></div>
  </div>

  <!-- toast -->
  <div id="toast" class="toast hidden">Loaded</div>

<script>
/* ==========================================================================
   WinGo Predictor Pro — Enhanced Single-file JS
   - Deterministic period->digit mapping (FNV-like hash)
   - History-aware confidence scoring:
       * base entropy from hash
       * frequency penalty/bonus based on history counts
       * recency penalty (if seen very recently)
       * smoothing / shrinkage to avoid overconfidence on small samples
   - Check button toggles "active" visual (yellow) on press, and toggles off on second press
   - Auto mode cycles every 38s (configurable) and runs check automatically (period increments or from API)
   - Processing spinner with $ icon shows during compute/fetch
   - UI rendering functions for bars, predictions, patterns, stats
   ========================================================================== */

/* ---------------------- small utilities ---------------------- */
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));
const clamp = (v,min,max) => Math.max(min, Math.min(max, v));
const toast = (txt, ms=1400) => {
  const t = $("#toast");
  t.textContent = txt; t.classList.remove("hidden");
  clearTimeout(toast._t); toast._t = setTimeout(()=>t.classList.add("hidden"), ms);
};

/* ---------------------- deterministic hashing ---------------------- */
/* FNV-1a like (fast, stable) */
function fnv1a(str){
  let h = 0x811c9dc5 >>> 0;
  for(let i=0;i<str.length;i++){
    h ^= str.charCodeAt(i);
    // mix
    h = Math.imul(h ^ (h >>> 16), 0x45d9f3b) >>> 0;
    // further avalanche
    h = (h + ((h<<3) >>> 0) + ((h<<7) >>> 0)) >>> 0;
  }
  return h >>> 0;
}

/* period -> digit 0..9 */
function periodDigit(period){
  const h = fnv1a(String(period));
  return h % 10;
}

/* digit color deterministic using parity bits and some mixing */
function digitColor(d, period){
  const h = fnv1a(String(period));
  const parity = ((h >>> 2) ^ (h >>> 7) ^ (h >>> 13)) & 3; // 0..3
  if(parity === 0) return "Green";
  if(parity === 1) return "Red";
  return "Green"; // majority green/red to keep BDG appearance
}

/* stable pseudo-random base confidence from period+digit */
function baseConfidence(d, period){
  const h = fnv1a(String(period)+"#"+d);
  return 0.60 + ((h & 1023)/1023)*0.30; // range 0.60..0.90
}

/* ---------------------- advanced confidence calculation ----------------------
   Confidence computation ingredients:
   - base 
