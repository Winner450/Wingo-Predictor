<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>üéØ WinGo Predictor Pro</title>
<style>
  :root{
    --bg:#0b0b0b;
    --panel:#121212;
    --muted:#9aa0a6;
    --text:#e8eaed;
    --brand:#ffe04d;
    --border:rgba(255,255,255,.08);
    --border-2:rgba(255,255,255,.14);
    --error:#ff6961;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans";
    background: linear-gradient(180deg,#0a0a0a 0%, #000 100%);
    color:var(--text);
  }

  /* Header */
  .app-header{
    position: sticky; top:0; z-index:50;
    background:var(--bg);
    border-bottom:1px solid var(--border);
    padding:12px 16px;
  }
  .brand-title{font-weight:800; color:var(--brand); letter-spacing:.3px; font-size:clamp(16px,3.6vw,22px)}
  .sub{display:block; font-weight:500; color:var(--muted); font-size:12px; margin-top:2px}

  /* Layout */
  .main-wrap{padding:16px; padding-top:clamp(68px, 8vh, 92px)}
  .container{max-width:980px; margin:0 auto}
  .card{
    background:var(--panel); border:1px solid var(--border);
    border-radius:18px; padding:16px; box-shadow:0 10px 30px rgba(0,0,0,.35);
  }
  .title{font-size:18px; font-weight:700; margin:0 0 12px}

  /* Form */
  .grid{display:grid; gap:12px}
  @media (min-width:720px){ .grid.cols-2{grid-template-columns:1fr 1fr} }
  label{display:block; color:var(--muted); font-size:13px; margin:6px 0}
  input, select{
    width:100%; padding:12px 12px; border-radius:12px; outline:none;
    background:#0a0a0a; color:var(--text); border:1px solid var(--border-2);
  }
  .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  .chip{display:inline-flex; align-items:center; gap:8px; background:#0a0a0a; border:1px solid var(--border-2); padding:8px 10px; border-radius:10px; font-size:13px; color:var(--muted)}

  /* Buttons */
  .btn{
    appearance:none; border:none; cursor:pointer; font-weight:700;
    padding:12px 16px; border-radius:12px; background:#1f2937; color:#fff;
  }
  .btn.primary{background:var(--brand); color:#1a1a1a}
  .btn.ghost{background:transparent; border:1px solid var(--border-2)}
  .btn:disabled{opacity:.6; cursor:not-allowed}

  /* Footer info */
  .muted{color:var(--muted); font-size:12px}

  /* Modal */
  .modal-backdrop{
    position:fixed; inset:0; background:rgba(0,0,0,.55);
    display:flex; align-items:center; justify-content:center; z-index:60;
  }
  .modal-card{
    width:min(520px, 92vw);
    background:var(--panel); color:var(--text);
    border:1px solid var(--border); border-radius:16px; padding:16px;
    box-shadow:0 10px 30px rgba(0,0,0,.45);
  }
  .modal-head{font-size:18px; font-weight:800; margin:0 0 10px}
  .error{color:var(--error); margin-top:6px; font-size:13px}

  /* Toast */
  .toast{
    position:fixed; left:50%; transform:translateX(-50%);
    bottom:18px; background:#111; color:#fff; border:1px solid var(--border);
    border-radius:12px; padding:10px 14px; z-index:70; opacity:0; pointer-events:none;
    transition:opacity .2s ease, transform .2s ease;
  }
  .toast.show{opacity:1; transform:translateX(-50%) translateY(-4px)}
</style>
</head>
<body>

<header class="app-header">
  <div class="container">
    <div class="brand-title">WinGo Predictor <b>Pro</b></div>
    <small class="sub">Quick predict ‚Ä¢ Smart validation ‚Ä¢ Learning</small>
  </div>
</header>

<main class="main-wrap">
  <div class="container">
    <section class="card">
      <h2 class="title">Quick Predict</h2>

      <div class="grid cols-2">
        <div>
          <label>Period Number</label>
          <!-- ‡§Ö‡§ó‡§∞ ‡§Ü‡§™‡§ï‡•Ä ‡§ê‡§™ ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§î‡§∞ ID ‡§π‡•à, JS resolver ‡§Ö‡§™‡§®‡•á-‡§Ü‡§™ ‡§™‡§ï‡§°‡§º ‡§≤‡•á‡§ó‡§æ -->
          <input id="periodInput" type="text" inputmode="numeric" placeholder="e.g. 202508141000003076">
        </div>

        <div>
          <label>Strategy</label>
          <select id="strategy">
            <option>Normal</option>
            <option>Anti-sequence</option>
            <option>High-variance</option>
          </select>
        </div>
      </div>

      <div class="row" style="margin:12px 0">
        <span class="chip"><input id="autoNext" type="checkbox" checked> Auto Next (30s)</span>
        <span class="chip"><input id="antiSeq" type="checkbox"> Anti-sequence</span>
        <span class="chip"><input id="learningOn" type="checkbox" checked> Learning ON</span>
        <button id="btnNotify" class="btn ghost">üîî Notifications</button>
      </div>

      <div class="row">
        <button id="btnPredict" class="btn primary">Predict</button>
        <button id="btnClear" class="btn">Clear</button>
        <button id="btnCopy" class="btn">Copy Result</button>
      </div>

      <p id="periodMeta" class="muted" style="margin-top:10px">Period: len <span id="lenMeta">0</span></p>

      <hr style="border-color:var(--border); border-width:0 0 1px; margin:16px 0">

      <div class="grid cols-2">
        <div>
          <label>Actual result (optional preview)</label>
          <input id="actualPreview" type="text" inputmode="numeric" placeholder="e.g. 5">
        </div>
      </div>

      <div class="row" style="margin-top:12px">
        <button id="btnVerifyLearn" class="btn">Verify &amp; Learn</button>
      </div>
    </section>
  </div>
</main>

<!-- Verify & Learn Modal -->
<div id="verifyModal" class="modal-backdrop" hidden>
  <div class="modal-card">
    <h3 class="modal-head">Verify Previous Period</h3>
    <p class="muted" style="margin-top:-6px">Previous period ‡§Ö‡§™‡§®‡•á-‡§Ü‡§™ ‡§∏‡•á‡§ü ‡§π‡•à; ‡§¨‡§∏ last result (0‚Äì9) ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§</p>

    <label>Previous Period (auto)</label>
    <input id="prevPeriodInput" type="text" readonly>

    <label style="margin-top:10px">Last Result (0‚Äì9)</label>
    <input id="actualDigitInput" type="text" inputmode="numeric" pattern="[0-9]" maxlength="1" placeholder="e.g. 5"/>

    <p id="verifyError" class="error" style="display:none"></p>

    <div class="row" style="justify-content:flex-end; margin-top:12px">
      <button id="verifyCancel" class="btn ghost">Cancel</button>
      <button id="verifySubmit" class="btn primary">Verify</button>
    </div>
  </div>
</div>

<div id="toast" class="toast"></div>

<script>
  // ---------- Helpers ----------
  const $ = (s)=>document.querySelector(s);

  function toast(msg){
    const el = $("#toast");
    el.textContent = msg;
    el.classList.add("show");
    clearTimeout(window.__t);
    window.__t = setTimeout(()=>el.classList.remove("show"), 1800);
  }

  $("#periodInput").addEventListener("input", ()=>{
    $("#lenMeta").textContent = ($("#periodInput").value||"").length;
  });

  // Robust period resolver: ‡§Ö‡§≤‡§ó IDs/‡§®‡§æ‡§Æ ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§≠‡•Ä period ‡§á‡§®‡§™‡•Å‡§ü ‡§¢‡•Ç‡§Å‡§¢‡•á‡§ó‡§æ
  function getPeriodInputEl(){
    const candidates = [
      "#periodInput", "#period-number", "#periodNumber", "#period_id",
      "input[name='period']", "input[data-role='period']"
    ];
    for(const sel of candidates){
      const el = document.querySelector(sel);
      if(el) return el;
    }
    // Fallback: ‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§¨‡§°‡§º‡§æ numeric ‡§á‡§®‡§™‡•Å‡§ü (‡§≤‡§Ç‡§¨‡§æ‡§à >= 12)
    const inputs = Array.from(document.querySelectorAll("input"));
    const guess = inputs.find(i => /^\d{12,}$/.test(i.value || ""));
    return guess || null;
  }
  function getCurrentPeriod(){
    const el = getPeriodInputEl();
    return el ? (el.value || "").trim() : "";
  }
  function focusPeriod(){
    const el = getPeriodInputEl();
    if(el){ el.focus(); el.scrollIntoView({behavior:"smooth", block:"center"}); }
  }

  // Previous period calc (leading zeros preserved)
  function getPrevPeriod(periodId){
    if(!periodId || !/^\d+$/.test(periodId)) return "";
    const len = periodId.length;
    const prev = (BigInt(periodId) - 1n).toString();
    return prev.padStart(len, "0");
  }

  // Predict (placeholder)
  $("#btnPredict").addEventListener("click", ()=>{
    const p = getCurrentPeriod();
    if(!p) return toast("Enter period number.");
    toast("Predicted ‚úî (demo)");
  });

  // Clear
  $("#btnClear").addEventListener("click", ()=>{
    const el = getPeriodInputEl();
    if(el) el.value = "";
    $("#actualPreview").value = "";
    $("#lenMeta").textContent = "0";
    toast("Cleared.");
  });

  // Copy (placeholder)
  $("#btnCopy").addEventListener("click", async ()=>{
    try{
      const txt = `Period: ${getCurrentPeriod() || "-"} | Strategy: ${$("#strategy").value}`;
      await navigator.clipboard.writeText(txt);
      toast("Copied.");
    }catch(e){ toast("Copy failed."); }
  });

  // ---------- Verify & Learn ----------
  function openVerifyModal(){
    const cur = getCurrentPeriod();
    const expectedPrev = getPrevPeriod(cur);
    $("#prevPeriodInput").value = expectedPrev;
    $("#actualDigitInput").value = "";
    $("#verifyError").style.display = "none";
    $("#verifyModal").hidden = false;

    if(!expectedPrev){
      showVerifyError("Current period ‡§ñ‡§æ‡§≤‡•Ä/‡§ó‡§≤‡§§ ‡§π‡•à‡•§ ‡§™‡§π‡§≤‡•á Period Number ‡§≠‡§∞‡•á‡§Ç‡•§");
    }
  }
  function closeVerifyModal(){ $("#verifyModal").hidden = true; }

  $("#btnVerifyLearn").addEventListener("click", openVerifyModal);
  $("#verifyCancel").addEventListener("click", closeVerifyModal);

  // Last Result ‡§Æ‡•á‡§Ç ‡§∏‡§ø‡§∞‡•ç‡§´ 1 digit ‡§∞‡§π‡§®‡•á ‡§¶‡•á‡§Ç (‡§Ø‡•Ç‡§ú‡§º‡§∞ 12165 ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á ‡§§‡•ã ‡§≠‡•Ä ‡§™‡§π‡§≤‡•á ‡§µ‡§æ‡§≤‡§æ ‡§π‡•Ä ‡§¨‡§ö‡•á)
  $("#actualDigitInput").addEventListener("input", (e)=>{
    e.target.value = (e.target.value.match(/\d/) || [""])[0];
  });

  $("#verifySubmit").addEventListener("click", ()=>{
    const cur = getCurrentPeriod();
    const expectedPrev = getPrevPeriod(cur);
    const prevShown = $("#prevPeriodInput").value.trim();
    const digit = $("#actualDigitInput").value.trim();

    if(!expectedPrev){
      showVerifyError("Invalid current period. ‡§™‡§π‡§≤‡•á Period Number ‡§°‡§æ‡§≤‡•á‡§Ç‡•§");
      focusPeriod();
      return;
    }
    if(prevShown !== expectedPrev){
      $("#prevPeriodInput").value = expectedPrev;
      return showVerifyError(`Previous period mismatch. ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è: ${expectedPrev}`);
    }
    if(!/^[0-9]$/.test(digit)){
      return showVerifyError("Last result ‡§ï‡•á‡§µ‡§≤ 0‚Äì9 ‡§ï‡§æ ‡§è‡§ï ‡§Ö‡§Ç‡§ï ‡§¶‡•á‡§Ç‡•§");
    }

    try{
      verifyAndLearn(prevShown, Number(digit));   // ‚Üê ‡§Ö‡§™‡§®‡•Ä ‡§Ö‡§∏‡§≤‡•Ä learning logic ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç
      closeVerifyModal();
      toast("Verified & learned from previous period.");
    }catch(e){
      console.error(e);
      showVerifyError("‡§ï‡•Å‡§õ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§Ü‡§à, ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§");
    }
  });

  function showVerifyError(msg){
    const el = $("#verifyError");
    el.textContent = msg;
    el.style.display = "block";
  }

  // ---- YOUR IMPLEMENTATION HOOK ----
  // ‡§á‡§∏‡•á ‡§Ö‡§™‡§®‡•Ä ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï storage/model ‡§Ö‡§™‡§°‡•á‡§ü ‡§∏‡•á ‡§¨‡§¶‡§≤‡•á‡§Ç
  function verifyAndLearn(prevPeriod, digit){
    // saveResult(prevPeriod, digit);
    // model.updateFrom(prevPeriod, digit);
    console.log("Learning from", prevPeriod, "digit", digit);
  }
</script>
</body>
</html>
