<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>üéØ WINGO PREDICTOR PRO</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<meta name="theme-color" content="#000000">
<style>
:root{
  --gold:#ffd54a;--gold-2:#f3c623;--ink:#e5e7eb;--muted:#9aa4b2;
  --bg:#0a0d14;--panel:#121723;--stroke:#1e2433;
  --ok:#22c55e;--am:#f59e0b;--bad:#ef4444;
  --shadow:0 14px 28px rgba(0,0,0,.35);
}
*{box-sizing:border-box}body{margin:0;background:#070b12;color:#fff;font:15.5px/1.45 ui-sans-serif,system-ui,Segoe UI,Roboto}
.header{position:sticky;top:0;z-index:50;background:linear-gradient(180deg,#05070d,#0b0f19)}
.brand-wrap{max-width:1180px;margin:0 auto;padding:12px 16px;display:flex;align-items:center}
.brand{display:inline-flex;align-items:center;gap:10px;padding:9px 18px;border-radius:999px;background:linear-gradient(180deg,var(--gold),var(--gold-2));color:#111;font-weight:900;letter-spacing:.6px;box-shadow:inset 0 1px 0 #fff8}
.brand:before{content:"";width:10px;height:10px;border-radius:50%;background:#10131f;box-shadow:inset 0 0 0 4px #0003,0 0 18px rgba(255,213,74,.45)}
.container{max-width:1180px;margin:14px auto;padding:0 16px}
.card{background:linear-gradient(180deg,#111724,#0e1420);border:1px solid var(--stroke);border-radius:18px;box-shadow:var(--shadow);padding:16px}
.h1{font-weight:800;font-size:20px;margin:0 0 10px}
.sub{color:var(--muted);font-size:12.5px}
.grid{display:grid;grid-template-columns:1.3fr .9fr;gap:14px}
@media (max-width:900px){.grid{grid-template-columns:1fr}}
label{font-size:13px;color:#d7dbe6;font-weight:700;margin-bottom:6px;display:block}
input,select{width:100%;padding:14px;background:#0b111c;border:2px solid #1b2333;border-radius:12px;color:#fff;font-size:16px;outline:none}
input:focus,select:focus{border-color:var(--gold)}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.btn{background:linear-gradient(180deg,var(--gold),var(--gold-2));color:#111;font-weight:900;border:0;border-radius:12px;padding:12px 16px;cursor:pointer}
.btn.sec{background:#131b2a;color:#e5e7eb;border:1px solid #273044}
.pill{display:inline-flex;align-items:center;gap:8px;border:1px solid #2a3448;background:#0e1422;border-radius:999px;padding:8px 12px;color:#cfd4e1;font-weight:800}
.hr{height:1px;background:#1a2130;margin:12px 0}
.kv{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
@media (max-width:900px){.kv{grid-template-columns:1fr}}
.box{background:#0c1321;border:1px solid #1b2335;border-radius:14px;padding:14px}
.key{color:#a1a8b8;font-size:12px}.val{color:#ffd54a;font-weight:900;font-size:30px}
.line{height:10px;background:#1a2536;border-radius:999px;overflow:hidden;margin:10px 0 4px}
.bar{height:10px;width:0%;background:linear-gradient(90deg,var(--gold-2),var(--gold))}
.sig-ok{color:#22c55e}.sig-am{color:#f59e0b}.sig-bad{color:#ef4444}
.section{display:grid;grid-template-columns:1fr 1fr;gap:14px}
@media (max-width:1000px){.section{grid-template-columns:1fr}}
.history{font-size:12.5px;color:#d3d8e4;max-height:260px;overflow:auto}
.hrow{padding:7px 2px;border-bottom:1px dashed #21293a}
.stat{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.stat .box .val{font-size:24px}
.badge{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;background:#0b121f;border:1px dashed #253148;color:#c9d1e6;font-weight:800}
</style>
</head>
<body>
<div class="header"><div class="brand-wrap"><div class="brand">WINGO PREDICTOR PRO</div></div></div>

<div class="container">
  <div class="card">
    <div class="h1">Quick Predict</div>
    <div class="grid">
      <div>
        <label for="period">üßæ Period Number</label>
        <input id="period" placeholder="e.g. 20250813100052810"/>
        <div class="sub">‡§ï‡•á‡§µ‡§≤ digits (0‚Äì9) ‚Ä¢ tail ‡§ñ‡•Å‡§¶-‡§¨-‡§ñ‡•Å‡§¶ ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ</div>
      </div>
      <div>
        <label for="modeSel">Strategy</label>
        <select id="modeSel">
          <option value="balanced">Normal</option>
          <option value="conservative">Confident</option>
          <option value="aggressive">Very Confident</option>
        </select>

        <div class="row" style="margin-top:8px">
          <label class="pill"><input id="autoNext" type="checkbox"> Auto Next</label>
          <select id="interval" style="width:130px"><option value="30">30 sec</option><option value="60">60 sec</option></select>
          <label class="pill"><input id="antiSeq" type="checkbox" checked> Anti-sequence</label>
          <label class="pill"><input id="learnOn" type="checkbox" checked> Learning ON</label>
          <label class="pill"><input id="soundOn" type="checkbox" checked> Sound ON</label>
          <button class="btn sec" id="notifyBtn">üîî Notifications</button>
        </div>

        <div class="row" style="margin-top:8px">
          <span class="badge">Mode:
            <select id="riskMode">
              <option value="rc">Risk-Controlled</option>
              <option value="ht" selected>High-Trade</option>
            </select>
          </span>
          <span class="badge">Confidence gate:
            <select id="gate">
              <option value="med">Med</option>
              <option value="high" selected>High</option>
              <option value="very">Very High</option>
            </select>
          </span>
          <span class="badge">Soft gate:
            <select id="softGate">
              <option value="lo" selected>Low</option>
              <option value="med">Med</option>
            </select>
          </span>
          <span class="badge">Max Skip:
            <select id="maxSkip">
              <option selected>2</option><option>3</option><option>4</option>
            </select>
          </span>
        </div>
      </div>
    </div>

    <div class="hr"></div>

    <div class="row">
      <button class="btn" id="btnPredict">üîÆ Predict</button>
      <button class="btn sec" id="btnClear">Clear</button>
      <button class="btn sec" id="btnCopy">Copy Result</button>
      <span class="pill" id="periodInfo">‚Äî</span>
    </div>

    <div class="hr"></div>

    <div class="row">
      <span class="badge"><label><input id="pReverse" type="checkbox" checked> Reverse</label></span>
      <span class="badge"><label><input id="pMirror" type="checkbox" checked> Mirror</label></span>
      <span class="badge"><label><input id="pCont"   type="checkbox" checked> Continuous</label></span>
      <span class="badge"><label><input id="pGap"    type="checkbox" checked> Gap/Skip</label></span>
      <span class="badge"><label><input id="pStreak" type="checkbox" checked> Streak-Guard</label></span>
    </div>
  </div>

  <div class="card" id="resultCard" style="margin-top:14px;display:none">
    <div class="kv">
      <div class="box"><div class="key">üßæ Period</div><div class="val" id="vPeriod">‚Äî</div></div>
      <div class="box"><div class="key">üî¢ Predicted Number</div><div class="val" id="vNum">‚Äî</div></div>
      <div class="box"><div class="key">üìè Size</div><div class="val" id="vSize">‚Äî</div></div>
    </div>
    <div style="margin-top:8px">
      <div class="key">üß† Confidence</div>
      <div class="line"><div class="bar" id="confBar"></div></div>
    </div>
    <div style="margin-top:10px">
      <span class="pill" id="signal">‚Äî</span>
      <span class="pill" id="why">‚Äî</span>
    </div>
  </div>

  <div class="section" style="margin-top:14px">
    <div class="card">
      <div class="h1">üìä Probability (0‚Äì9)</div>
      <canvas id="probChart" height="220"></canvas>
    </div>
    <div class="card">
      <div class="h1">üïò Recent Predictions</div>
      <div id="hist" class="history">‚Äî</div>
      <div class="hr"></div>
      <div class="h1">üìà Session Stats</div>
      <div class="stat">
        <div class="box"><div class="key">Plays</div><div class="val" id="stPlays">0</div></div>
        <div class="box"><div class="key">Soft Plays</div><div class="val" id="stSoft">0</div></div>
        <div class="box"><div class="key">Skips</div><div class="val" id="stSkips">0</div></div>
        <div class="box"><div class="key">Avg Conf.</div><div class="val" id="stAvg">‚Äî</div></div>
      </div>
    </div>
  </div>
</div>

<script>
/* ========= helpers ========= */
const el=id=>document.getElementById(id);
const isDigits=s=>/^\d+$/.test(s||"");const clamp01=x=>Math.max(0,Math.min(1,x));
const normalize=a=>{const s=a.reduce((p,c)=>p+c,0)||1;return a.map(x=>x/s)};const argmax=a=>a.indexOf(Math.max(...a));
const bump=p=>{try{return (BigInt(p)+1n).toString()}catch{const a=p.split('').map(n=>+n);for(let i=a.length-1;i>=0;i--){if(a[i]===9)a[i]=0;else{a[i]++;break;}}return a.join('')}};
function hash32(str){let h=2166136261>>>0;for(let i=0;i<str.length;i++){h^=str.charCodeAt(i);h=Math.imul(h,16777619)}return h>>>0;}
function mulberry32(seed){return function(){let t=seed+=0x6D2B79F5;t=Math.imul(t^t>>>15,t|1);t^=t+Math.imul(t^t>>>7,t|61);return((t^t>>>14)>>>0)/4294967296}}
function describe(p){return isDigits(p)?`len ${p.length} ‚Ä¢ tail ${p.slice(-4)}`:'‚Äî'}

/* ========= coin sound ========= */
let audioCtx=null;function coin(){if(!el('soundOn').checked)return;try{if(!audioCtx)audioCtx=new (window.AudioContext||window.webkitAudioContext)();const o=audioCtx.createOscillator(),g=audioCtx.createGain();o.type='triangle';o.frequency.setValueAtTime(880,audioCtx.currentTime);g.gain.setValueAtTime(0.0001,audioCtx.currentTime);g.gain.exponentialRampToValueAtTime(0.4,audioCtx.currentTime+0.02);g.gain.exponentialRampToValueAtTime(0.0001,audioCtx.currentTime+1.0);o.connect(g);g.connect(audioCtx.destination);o.start();o.stop(audioCtx.currentTime+1.02);}catch{}}

/* ========= notifications ========= */
(async function(){ if('serviceWorker'in navigator){try{await navigator.serviceWorker.register('/sw.js',{scope:'/'});await navigator.serviceWorker.ready;}catch{}}})();
async function ensureNotifyPerm(){if(!('Notification'in window))return false;if(Notification.permission==='granted')return true;if(Notification.permission==='denied')return false;try{return(await Notification.requestPermission())==='granted'}catch{return false}}
async function notify({tail,digit,size,signal}){try{const reg=await navigator.serviceWorker.ready;if(!reg)return;const ok=await ensureNotifyPerm();if(!ok)return;await reg.showNotification(`${signal}: #${digit} (${size})`,{body:`Period tail ${tail}`,tag:`wingo-${tail}`,renotify:true,requireInteraction:false,vibrate:[50,20,50]});}catch{}}

/* ========= learning store ========= */
const LS='WPP_SIZE2';const loadSz=()=>{try{return JSON.parse(localStorage.getItem(LS))||[1,1]}catch{return [1,1]}};
const saveSz=s=>localStorage.setItem(LS,JSON.stringify(s));

/* ========= priors ========= */
function pPeriod(period){if(!isDigits(period))return Array(10).fill(0.1);const d=[...period].map(Number);const s=d.reduce((a,b)=>a+b,0),m10=s%10,m7=s%7;const f=Array(10).fill(0);d.forEach(x=>f[x]++);const v=Array(10).fill(0.1);v[m10]+=0.44;v[(m7*3)%10]+=0.22;v[(m7*5)%10]+=0.20;const mx=Math.max(...f),mn=Math.min(...f);for(let i=0;i<10;i++){const r=(mx-mn)?(mx-f[i])/(mx-mn):0;v[i]+=0.06*r}return normalize(v)}
function pParity(period){if(!isDigits(period))return Array(10).fill(0.1);const even=(+period.slice(-2))%2===0;const v=Array(10).fill(0.1);if(even){for(let i=0;i<10;i+=2)v[i]+=0.22}else{for(let i=1;i<10;i+=2)v[i]+=0.22}return normalize(v)}
function pBucket(period,anti){if(!isDigits(period))return Array(10).fill(0.1);const tail=+period.slice(-3),m=tail%10,v=Array(10).fill(0.1);const k=anti?0.16:0.36;v[m]+=k;v[(m+3)%10]+=k*0.55;v[(m+7)%10]+=k*0.45;return normalize(v)}
function pChecksum(period){if(!isDigits(period))return Array(10).fill(0.1);const s=[...period].reduce((a,b)=>a+(+b),0),t=(s%9+s%10)%10;const v=Array(10).fill(0.1);v[t]+=0.30;v[(t+1)%10]+=0.16;v[(t+9)%10]+=0.16;return normalize(v)}
function pHashed(period){if(!isDigits(period))return Array(10).fill(0.1);const sd=hash32(period+'d')%10;const v=Array(10).fill(0.1);for(let i=0;i<10;i++){const d=Math.min((i-sd+10)%10,(sd-i+10)%10);v[i]+=0.28*Math.exp(-0.55*d)}return normalize(v)}
function regime(w){const s=loadSz();const big=s[1]/(s[0]+s[1]);const out=w.slice();if(big>0.62||big<0.38)out[4]+=0.02;const sum=out.reduce((a,b)=>a+b,0);return out.map(x=>x/sum)}

/* ========= core predictor ========= */
function predict(period,mode,anti,learn,patterns){
  const H={
    conservative:{temp:1.04,cap:0.58,jit:0.05,adapt:0.12,w:[0.34,0.16,0.18,0.18,0.14],k:0.25},
    balanced    :{temp:1.06,cap:0.62,jit:0.08,adapt:0.18,w:[0.32,0.18,0.20,0.18,0.12],k:0.30},
    aggressive  :{temp:1.08,cap:0.66,jit:0.12,adapt:0.24,w:[0.30,0.18,0.22,0.18,0.12],k:0.35}
  }[mode];
  const P1=pPeriod(period),P2=pParity(period),P3=pBucket(period,anti),P4=pChecksum(period),P5=pHashed(period);
  const w=regime(H.w);
  let base=normalize(P1.map((_,i)=>w[0]*P1[i]+w[1]*P2[i]+w[2]*P3[i]+w[3]*P4[i]+w[4]*P5[i]));

  if(patterns.reverse) base=base.slice().reverse();
  if(patterns.mirror){const b=base.slice();for(let i=0;i<5;i++){const t=b[i];b[i]=b[9-i];b[9-i]=t;}base=normalize(b);}
  if(patterns.cont){const b=base.slice();for(let i=0;i<10;i++){b[i]=(b[i]*1.0+(base[(i+1)%10]+base[(i+9)%10])*0.25);}base=normalize(b);}
  if(patterns.gap){const mx=Math.max(...base);base=normalize(base.map(p=>p===mx?p*1.06:p*0.98));}

  const sorted=base.slice().sort((a,b)=>b-a),t=sorted[2]||0.1;
  base=normalize(base.map(p=>p*(1+H.adapt*((p-t)/(t+1e-9)))));
  if(learn){const sz=loadSz(),tot=(sz[0]+sz[1])||1,small=sz[0]/tot,big=sz[1]/tot,k=H.k;for(let i=0;i<5;i++)base[i]*=(1-k+k*small);for(let i=5;i<10;i++)base[i]*=(1-k+k*big);base=normalize(base);}

  const seed=hash32(period),rnd=mulberry32(seed);const B=72,j=H.jit,agg=Array(10).fill(0),votes=Array(10).fill(0);
  for(let b=0;b<B;b++){const p=normalize(base.map(x=>Math.max(0,x*(1+(rnd()*2-1)*j))));p.forEach((x,i)=>agg[i]+=x);votes[argmax(p)]++;}
  let probs=normalize(agg).map(p=>Math.pow(p,1/H.temp));probs=normalize(probs);
  const iM=argmax(probs),mx=probs[iM];if(mx>H.cap){const excess=mx-H.cap;probs[iM]-=excess;const rest=probs.reduce((a,b,i)=>i===iM?a:a+b,0)||1;const scale=(1-probs[iM])/rest;for(let i=0;i<10;i++)if(i!==iM)probs[i]*=scale;probs=normalize(probs);}
  const stability=Math.max(...votes)/B;
  return {probs,stability};
}

/* ========= decision engine (tuned) ========= */
let skipStreak=0, stat={plays:0,soft:0,skips:0,sum:0,n:0};
function gapTop(p){const s=p.slice().sort((a,b)=>b-a);return s[0]-s[1];}
function decide(conf,probs,modeSel){
  const gate=el('gate').value, softSel=el('softGate').value, maxSkip=parseInt(el('maxSkip').value||'2',10);
  // RC defaults
  let hard=0.60, soft=0.46, gH=0.055, gS=0.035;
  if(modeSel==='ht'){ hard=0.54; soft=0.40; gH=0.045; gS=0.028; } // High-Trade
  if(gate==='very'){ hard+=0.06; gH+=0.01 } else if(gate==='med'){ hard-=0.04; gH-=0.006 }
  if(softSel==='med'){ soft+=0.03; gS+=0.006 } // low = default

  // dynamic easing with skip
  const ease=Math.min(skipStreak,maxSkip);
  soft -= 0.02*ease; gS -= 0.004*ease;

  const pBig=probs.slice(5).reduce((a,b)=>a+b,0), strongBig=pBig>=0.60, strongSmall=pBig<=0.40;
  const gap=gapTop(probs); const pick=argmax(probs); const size=(pick>=5)?'Big':'Small';

  if(conf>=hard || gap>=gH){ skipStreak=0; stat.plays++; return {sig:'Play',cls:'sig-ok',stake:'Full',why:(conf>=hard?`conf ${Math.round(conf*100)}%`:`gap ${(gap*100).toFixed(1)}%`),pick,size};}
  if(conf>=soft || gap>=gS){ skipStreak=0; stat.soft++; return {sig:'Soft Play',cls:'sig-am',stake:'Half',why:(conf>=soft?`conf ${Math.round(conf*100)}%`:`gap ${(gap*100).toFixed(1)}%`),pick,size};}

  if(strongBig && skipStreak>=Math.max(1,maxSkip-1)){ skipStreak=0; stat.soft++; return {sig:'Soft Play',cls:'sig-am',stake:'Half',why:`size BIG ${Math.round(pBig*100)}%`,pick:7,size:'Big'};}
  if(strongSmall && skipStreak>=Math.max(1,maxSkip-1)){ skipStreak=0; stat.soft++; return {sig:'Soft Play',cls:'sig-am',stake:'Half',why:`size SMALL ${Math.round((1-pBig)*100)}%`,pick:2,size:'Small'};}

  if(skipStreak+1>=maxSkip){ skipStreak=0; stat.soft++; return {sig:'Soft Play',cls:'sig-am',stake:'Half',why:`min-skip ${maxSkip}`,pick,size};}

  skipStreak++; stat.skips++; return {sig:'Skip',cls:'sig-bad',stake:'No bet',why:`conf ${Math.round(conf*100)}% ‚Ä¢ gap ${(gap*100).toFixed(1)}%`,pick,size};
}

/* ========= charts & render ========= */
let probChart=null;function draw(probs){const data=probs.map(p=>Math.round(p*1000)/10),labels=[...Array(10).keys()].map(String);if(probChart)probChart.destroy();probChart=new Chart(el('probChart').getContext('2d'),{type:'bar',data:{labels,datasets:[{label:'Probability (%)',data}]},options:{responsive:true,scales:{y:{beginAtZero:true,title:{display:true,text:'%'}},x:{title:{display:true,text:'Digit'}}}})}
function render(period,out,dec){
  const probs=out.probs.slice();draw(probs);
  let H=0;probs.forEach(p=>{if(p>0)H+=-p*Math.log(p)});const entropy=clamp01(1-H/Math.log(10));
  const conf=clamp01(0.70*entropy+0.30*clamp01(out.stability||0)); // tuned 70/30

  el('resultCard').style.display='block';
  el('vPeriod').textContent=period; el('vNum').textContent=dec.pick; el('vSize').textContent=(dec.pick>=5)?'Big':'Small';
  el('confBar').style.width=(conf*100).toFixed(1)+'%'; el('signal').textContent=dec.sig+' ‚Ä¢ '+dec.stake; el('signal').className='pill '+dec.cls; el('why').textContent='Why: '+dec.why;

  const h=el('hist'); if(h.textContent==='‚Äî')h.textContent='';
  const tag=(dec.sig==='Skip')?'Skip':('#'+dec.pick+' ('+((dec.pick>=5)?'Big':'Small')+')');
  h.insertAdjacentHTML('afterbegin',`<div class="hrow">‚è± ${new Date().toLocaleTimeString()} ‚Ä¢ tail ${String(period).slice(-4)} ‚Üí ${tag}</div>`);
  [...h.children].slice(18).forEach(n=>n.remove());

  stat.sum+=conf; stat.n++; el('stPlays').textContent=stat.plays; el('stSoft').textContent=stat.soft; el('stSkips').textContent=stat.skips; el('stAvg').textContent=(stat.n?Math.round(stat.sum/stat.n*100)+'%':'‚Äî');
}

/* ========= run & bindings ========= */
let timer=null,busy=false;
function patterns(){return{reverse:el('pReverse').checked,mirror:el('pMirror').checked,cont:el('pCont').checked,gap:el('pGap').checked,streak:el('pStreak').checked}}
async function run(source='manual'){
  if(busy)return;busy=true;setTimeout(()=>busy=false,120);
  const pr=el('period').value.trim(); if(!isDigits(pr)){alert('Valid period number ‡§≠‡§∞‡•á‡§Ç');return;}
  el('periodInfo').textContent='Period: '+describe(pr);
  const out=predict(pr,el('modeSel').value,el('antiSeq').checked,el('learnOn').checked,patterns());
  // confidence (same formula used in render)
  let H=0; out.probs.forEach(p=>{if(p>0)H+=-p*Math.log(p)});const conf=clamp01(0.70*(1-H/Math.log(10))+0.30*(clamp01(out.stability||0)));
  const dec=decide(conf,out.probs,el('riskMode').value); render(pr,out,dec);
  if(dec.sig!=='Skip'){coin(); if(source==='auto'&&el('autoNext').checked){notify({tail:String(pr).slice(-3),digit:dec.pick,size:dec.size,signal:dec.sig});}}
}
function startAuto(){clearInterval(timer);const sec=parseInt(el('interval').value,10)||30;timer=setInterval(()=>{const cur=el('period').value.trim();if(isDigits(cur))el('period').value=bump(cur);run('auto');},sec*1000)}

document.addEventListener('DOMContentLoaded',()=>{
  el('btnPredict').addEventListener('click',()=>run('manual'));
  el('period').addEventListener('keydown',e=>{if(e.key==='Enter')run('manual')});
  el('btnClear').addEventListener('click',()=>{clearInterval(timer);timer=null;el('autoNext').checked=false;el('period').value='';el('periodInfo').textContent='‚Äî';el('resultCard').style.display='none';el('hist').textContent='‚Äî';if(probChart){probChart.destroy();probChart=null}skipStreak=0;stat={plays:0,soft:0,skips:0,sum:0,n:0};el('stPlays').textContent='0';el('stSoft').textContent='0';el('stSkips').textContent='0';el('stAvg').textContent='‚Äî';});
  el('btnCopy').addEventListener('click',async()=>{const txt=`Period: ${el('vPeriod').textContent}, Number: ${el('vNum').textContent}, Size: ${el('vSize').textContent}, ${el('signal').textContent}`;try{await navigator.clipboard.writeText(txt);alert('Copied!');}catch{}});
  el('autoNext').addEventListener('change',e=>{clearInterval(timer);timer=null;if(e.target.checked)startAuto()});
  el('interval').addEventListener('change',()=>{if(el('autoNext').checked)startAuto()});
  el('notifyBtn').addEventListener('click',async()=>alert((await ensureNotifyPerm())?'Notifications enabled':'Notifications blocked'));
});
</script>
</body>
</html>
