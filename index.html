<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>üéØ WinGo Predictor Pro ‚Äî Edge-Guard 60</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root{
  --gold:#ffd700; --gold2:#f5d46b; --ink:#e5e7eb; --muted:#9ca3af;
  --bg:#090a0f; --card:#12141a; --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444;
  --radius:16px; --shadow:0 14px 28px rgba(0,0,0,.38);
}
*{box-sizing:border-box} body{margin:0;background:
 radial-gradient(900px 360px at 10% -5%,rgba(255,215,0,.06),transparent),
 radial-gradient(700px 300px at 110% 10%,rgba(245,212,107,.06),transparent),
 linear-gradient(160deg,#0a0b10,#000); color:#fff;font:15.5px/1.5 ui-sans-serif,system-ui,Segoe UI,Roboto}
.header{position:sticky;top:0;z-index:1000;backdrop-filter:saturate(140%) blur(6px);
  padding:10px 0;border-bottom:1px solid rgba(255,255,255,.06);
  background:linear-gradient(180deg,rgba(0,0,0,.85),rgba(0,0,0,.75))}
.header .wrap{max-width:1180px;margin:0 auto;padding:0 16px;display:flex;justify-content:center}
.brand{display:flex;align-items:center;gap:10px;padding:8px 18px;border-radius:999px;color:#111;font-weight:900;letter-spacing:.3px;
  background:linear-gradient(90deg,#ffc107,#ffd700 50%,#f5d46b);box-shadow:inset 0 -2px 0 rgba(0,0,0,.25),0 6px 18px rgba(255,215,0,.18)}
.brand .dot{width:10px;height:10px;border-radius:50%;background:#111;box-shadow:0 0 0 3px rgba(0,0,0,.18) inset}
.container{max-width:1180px;margin:18px auto 48px;padding:0 16px}
.card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
.h1{font-size:18px;font-weight:800;margin:0 0 10px}.sub{color:var(--muted);font-size:12.8px;margin-top:6px}
.grid{display:grid;grid-template-columns:1.2fr .8fr;gap:14px} @media (max-width:900px){.grid{grid-template-columns:1fr}}
label{font-size:13px;color:#d8dbe2;font-weight:700;margin-bottom:6px;display:block}
input,select{width:100%;padding:14px;background:#0b0f15;border:2px solid #202636;border-radius:12px;color:#fff;font-size:16px}
input:focus,select:focus{border-color:var(--gold)}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.btn{background:linear-gradient(180deg,var(--gold),var(--gold2));color:#111;font-weight:900;border:0;border-radius:12px;padding:12px 18px;cursor:pointer}
.btn.sec{background:#1c2333;color:#e5e7eb;border:1px solid #2a3448}
.switch{display:inline-flex;gap:8px;align-items:center;color:#e0e3ea;font-size:13px}
.chip{display:inline-flex;align-items:center;gap:8px;background:#0f1522;border:1px solid #1f2a40;border-radius:999px;padding:8px 12px;color:#cfd4e1;font-weight:700}
.kv{display:grid;grid-template-columns:repeat(3,1fr);gap:12px} @media (max-width:900px){.kv{grid-template-columns:1fr}}
.box{background:#0b0f15;border:1px solid #1a2130;border-radius:14px;padding:14px}
.key{color:#a1a8b8;font-size:12px}.val{color:var(--gold);font-weight:900;font-size:30px}
.line{height:10px;background:#1c2534;border-radius:999px;overflow:hidden;margin:10px 0 2px}
.bar{height:10px;width:0%;background:linear-gradient(90deg,var(--gold2),var(--gold))}
.pill{display:inline-block;border:1px solid #2a3448;border-radius:999px;padding:6px 10px;font-weight:800;margin-right:6px}
.ok{color:var(--ok)} .warn{color:var(--warn)} .bad{color:var(--bad)}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:14px} @media (max-width:900px){.grid2{grid-template-columns:1fr}}
.history{font-size:12px;color:#cfd4e1;max-height:240px;overflow:auto}
.hrow{padding:6px 0;border-bottom:1px dashed #21293a}
.helper{font-size:12px;color:#9ca3af}.hr{height:1px;background:#1a2130;margin:12px 0}
.pack{display:flex;gap:10px;flex-wrap:wrap}
.badge{font-size:12px;color:#cbd5e1;margin-left:6px}
</style>
</head>
<body>
<div class="header"><div class="wrap">
  <div class="brand"><span class="dot"></span><span>WINGO PREDICTOR PRO</span></div>
</div></div>

<div class="container" id="appRoot">
  <div class="card">
    <div class="h1">Quick Predict</div>
    <div class="grid">
      <div>
        <label for="period">üßæ Period Number</label>
        <input id="period" placeholder="e.g. 20250813100052810" autocomplete="off"/>
        <div class="sub">‡§≤‡§Æ‡•ç‡§¨‡§æ period ID ‚Ä¢ ‡§ï‡•á‡§µ‡§≤ digits (0‚Äì9)</div>
      </div>
      <div>
        <label for="mode">Strategy</label>
        <select id="mode">
          <option value="balanced" selected>Normal</option>
          <option value="conservative">Confidence</option>
          <option value="aggressive">Very Confident</option>
        </select>
        <div class="row" style="margin-top:10px">
          <label class="switch"><input id="autoNext" type="checkbox"> Auto Next</label>
          <label class="switch">‚è± Interval
            <select id="autoEvery" style="padding:8px 10px;border-radius:10px;border:1px solid #2a3448;background:#121722;color:#fff">
              <option value="30" selected>30 sec</option><option value="60">1 min</option>
            </select>
          </label>
          <label class="switch"><input id="antiSeq" type="checkbox" checked> Anti-sequence</label>
          <label class="switch"><input id="learnOn" type="checkbox" checked> Learning ON <span id="bias" class="badge">‚Äî</span></label>
          <button class="btn sec" id="notifyBtn" type="button">üîî Notifications</button>
        </div>
        <div class="sub" style="margin-top:8px">Pattern Pack</div>
        <div class="pack">
          <label class="chip"><input id="pReverse" type="checkbox"> Reverse</label>
          <label class="chip"><input id="pMirror"  type="checkbox"> Mirror</label>
          <label class="chip"><input id="pCont"    type="checkbox"> Continuous</label>
          <label class="chip"><input id="pGap"     type="checkbox"> Gap/Skip</label>
          <label class="chip"><input id="pGuard"   type="checkbox" checked> Adversarial Guard</label>
          <label class="chip">Gate
            <select id="gate" style="margin-left:8px;padding:4px 8px;border-radius:8px;border:1px solid #2a3448;background:#0d1320;color:#fff">
              <option value="0.55">High (‚âà‡§ï‡§Æ ‡§∏‡§ø‡§ó‡•ç‡§®‡§≤)</option>
              <option value="0.60" selected>Very High (Edge-Guard 60)</option>
              <option value="0.65">Ultra</option>
            </select>
          </label>
        </div>
      </div>
    </div>

    <div class="row" style="margin-top:12px">
      <button class="btn" id="btnPredict" type="button">üîÆ Predict</button>
      <button class="btn sec" id="btnClear" type="button">Clear</button>
      <button class="btn sec" id="btnCopy" type="button">Copy Result</button>
      <span class="helper" id="periodInfo">‚Äî</span>
    </div>

    <div class="hr"></div>
    <div class="grid">
      <div>
        <label>‚úÖ Actual size ‚Äî optional (Learning)</label>
        <div class="row">
          <label class="switch"><input type="radio" name="actSize" id="actSmall" value="small"> Small (0‚Äì4)</label>
          <label class="switch"><input type="radio" name="actSize" id="actBig" value="big"> Big (5‚Äì9)</label>
        </div>
      </div>
      <div class="row" style="align-items:end">
        <button class="btn sec" id="btnVerify" type="button">Verify & Learn</button>
        <span class="helper" id="verifyMsg">‚Äî</span>
      </div>
    </div>
  </div>

  <div class="card" id="resultCard" style="margin-top:14px;display:none">
    <div class="kv">
      <div class="box"><div class="key">üßæ Period</div><div class="val" id="vPeriod">‚Äî</div></div>
      <div class="box"><div class="key">üî¢ Predicted</div><div class="val" id="vNum">‚Äî</div></div>
      <div class="box"><div class="key">üìè Size</div><div class="val" id="vSize">‚Äî</div></div>
    </div>
    <div style="margin-top:10px">
      <div class="key">üß† Confidence</div>
      <div class="line"><div class="bar" id="confBar"></div></div>
    </div>
    <div style="margin-top:10px">
      <span id="playSignal" class="pill">‚Äî</span>
      <span id="reasons" class="pill">‚Äî</span>
    </div>
  </div>

  <div class="grid2" style="margin-top:14px">
    <div class="card"><div class="h1">üìä Probability (0‚Äì9)</div><canvas id="probChart" height="220"></canvas></div>
    <div class="card"><div class="h1">üïò Recent Predictions</div><div id="hist" class="history">‚Äî</div></div>
  </div>
</div>

<script>
/* ---------- notifications + ding ---------- */
(async function(){ if('serviceWorker' in navigator){ try{await navigator.serviceWorker.register('/sw.js',{scope:'/'});await navigator.serviceWorker.ready;}catch{}}})();
async function ensureNotifyPerm(){ if(!('Notification' in window)) return false;
  if(Notification.permission==='granted') return true; if(Notification.permission==='denied') return false;
  try{ return (await Notification.requestPermission())==='granted'; }catch{ return false; } }
async function notifyPopup({tail,digit,size}){ try{
  const ok=await ensureNotifyPerm(); if(!ok) return;
  try{ const reg=await navigator.serviceWorker.ready; if(reg?.showNotification){
    await reg.showNotification(`Next ‚Ä¢ ${tail}`,{body:`#${digit} ‚Ä¢ ${size}`,tag:`wingo-${tail}`,renotify:true,requireInteraction:true}); return;}}
  catch{} new Notification(`Next ‚Ä¢ ${tail}`,{body:`#${digit} ‚Ä¢ ${size}`});
}catch{} }
let audioCtx=null; function playDing(){ try{
  audioCtx=audioCtx||new (window.AudioContext||window.webkitAudioContext)();
  const o=audioCtx.createOscillator(), g=audioCtx.createGain();
  o.type='triangle'; o.frequency.setValueAtTime(880,audioCtx.currentTime);
  o.frequency.exponentialRampToValueAtTime(660,audioCtx.currentTime+0.15);
  g.gain.setValueAtTime(0.001,audioCtx.currentTime);
  g.gain.exponentialRampToValueAtTime(0.55,audioCtx.currentTime+0.03);
  g.gain.exponentialRampToValueAtTime(0.0001,audioCtx.currentTime+0.95);
  o.connect(g).connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime+1);
}catch{} }

/* ---------- helpers ---------- */
const el=id=>document.getElementById(id);
const isDigits=s=>/^\d+$/.test(s||""); const clamp01=x=>Math.max(0,Math.min(1,x));
const normalize=a=>{const s=a.reduce((p,c)=>p+c,0)||1;return a.map(x=>x/s);};
const argmax=a=>a.indexOf(Math.max(...a));
const bump=p=>{try{return (BigInt(p)+1n).toString()}catch{const a=p.split('').map(n=>+n);for(let i=a.length-1;i>=0;i--){if(a[i]===9)a[i]=0;else{a[i]++;break;}}return a.join('')}};
const hash32=str=>{let h=2166136261>>>0;for(let i=0;i<str.length;i++){h^=str.charCodeAt(i);h=Math.imul(h,16777619)}return h>>>0;}
const mulberry32=seed=>function(){let t=seed+=0x6D2B79F5;t=Math.imul(t^t>>>15,t|1);t^=t+Math.imul(t^t>>>7,t|61);return((t^t>>>14)>>>0)/4294967296}
function describePeriod(p){return isDigits(p)?`len ${p.length} ‚Ä¢ tail ${p.slice(-4)}`:'‚Äî';}

/* ---------- size learning ---------- */
const LS_SIZE='WPP_SIZE2';
const loadSize =()=>{try{return JSON.parse(localStorage.getItem(LS_SIZE))||[1,1]}catch{return [1,1]}};
const saveSize =s=>localStorage.setItem(LS_SIZE,JSON.stringify(s));
function renderBias(){ const s=loadSize(); const t=(s[0]+s[1])||1; el('bias').textContent=`Bias Big ${Math.round(s[1]/t*100)}%`; }

/* ---------- base priors ---------- */
function priorPeriodDigits(period){ if(!isDigits(period)) return Array(10).fill(0.1);
  const d=[...period].map(Number), s=d.reduce((a,b)=>a+b,0), mod10=s%10, mod7=s%7;
  const freq=Array(10).fill(0); d.forEach(x=>freq[x]++); const v=Array(10).fill(0.1);
  v[mod10]+=0.44; v[(mod7*3)%10]+=0.22; v[(mod7*5)%10]+=0.20;
  const mx=Math.max(...freq), mn=Math.min(...freq); for(let i=0;i<10;i++){const r=(mx-mn)?(mx-freq[i])/(mx-mn):0; v[i]+=0.06*r}
  return normalize(v);
}
function priorParity(period){ if(!isDigits(period)) return Array(10).fill(0.1);
  const even=(+period.slice(-2))%2===0; const v=Array(10).fill(0.1);
  if(even){for(let i=0;i<10;i+=2)v[i]+=0.22}else{for(let i=1;i<10;i+=2)v[i]+=0.22} return normalize(v); }
function priorBucket(period,antiSeq){ if(!isDigits(period)) return Array(10).fill(0.1);
  const tail=+period.slice(-3), m=tail%10, v=Array(10).fill(0.1); const k=antiSeq?0.16:0.36;
  v[m]+=k; v[(m+3)%10]+=k*0.55; v[(m+7)%10]+=k*0.45; return normalize(v); }
function priorChecksum(period){ if(!isDigits(period)) return Array(10).fill(0.1);
  const s=[...period].reduce((a,b)=>a+(+b),0), t=(s%9+s%10)%10; const v=Array(10).fill(0.1);
  v[t]+=0.30; v[(t+1)%10]+=0.16; v[(t+9)%10]+=0.16; return normalize(v); }
function priorDistanceHashed(period){ if(!isDigits(period)) return Array(10).fill(0.1);
  const seedDigit=hash32(period+'d')%10; const v=Array(10).fill(0.1);
  for(let i=0;i<10;i++){const d=Math.min((i-seedDigit+10)%10,(seedDigit-i+10)%10); v[i]+=0.28*Math.exp(-0.55*d);} return normalize(v); }

/* patterns */
function patternPack(period,{rev,mir,cont,gap}){ const v=Array(10).fill(0.1); if(!isDigits(period)) return v;
  const t1=(+period.slice(-1))%10, t2=(+period.slice(-2))%10, t3=(+period.slice(-3))%10;
  if(rev){ v[(10-t2)%10]+=0.18; v[(10-t3)%10]+=0.10; }
  if(mir){ v[(9-t1)]+=0.20; }
  if(cont){ v[(t1+1)%10]+=0.16; v[(t1+2)%10]+=0.10; }
  if(gap){  v[(t1+3)%10]+=0.12; v[(t1+5)%10]+=0.08; }
  return normalize(v);
}
function regimeWeights(w){ const s=loadSize(); const big=s[1]/(s[0]+s[1]); const out=w.slice();
  if(big>0.62||big<0.38) out[4]+=0.02; const sum=out.reduce((a,b)=>a+b,0); return out.map(x=>x/sum); }

/* ---------- ensemble predictor ---------- */
function singleModel(period,mode,antiSeq,learnOn,packFlags,guard,tempShift=0,seedSalt=''){
  const baseHyper={
    conservative:{temp:1.04,cap:0.58,jitter:0.05,adapt:0.12,w:[0.33,0.16,0.18,0.18,0.15],learnBoost:0.25},
    balanced    :{temp:1.06,cap:0.62,jitter:0.08,adapt:0.18,w:[0.31,0.18,0.20,0.18,0.13],learnBoost:0.30},
    aggressive  :{temp:1.08,cap:0.66,jitter:0.12,adapt:0.24,w:[0.30,0.18,0.22,0.18,0.12],learnBoost:0.35}
  }[mode];
  const hyper=JSON.parse(JSON.stringify(baseHyper)); hyper.temp+=tempShift;

  const P1=priorPeriodDigits(period),P2=priorParity(period),P3=priorBucket(period,antiSeq),P4=priorChecksum(period),P5=priorDistanceHashed(period),PP=patternPack(period,packFlags);
  const w=regimeWeights(hyper.w);
  let base=normalize(P1.map((_,i)=> w[0]*P1[i]+w[1]*P2[i]+w[2]*P3[i]+w[3]*P4[i]+w[4]*P5[i]+0.12*PP[i]));

  if(guard){ const ramp=i=>Math.abs(base[i]-((base[(i+1)%10]+base[(i+9)%10])/2));
    const mean=base.reduce((a,b)=>a+b,0)/10, lin=base.map((_,i)=>ramp(i)).reduce((a,b)=>a+b,0)/10;
    if(lin<0.01) base=normalize(base.map(p=>p*0.8+mean*0.2));
  }

  const sorted=base.slice().sort((a,b)=>b-a), t=sorted[2]||0.1;
  base=normalize(base.map(p=>p*(1+hyper.adapt*((p-t)/(t+1e-9)))));

  if(learnOn){
    const sz=loadSize(); const total=(sz[0]+sz[1])||1; const smallBias=sz[0]/total, bigBias=sz[1]/total, k=hyper.learnBoost;
    for(let i=0;i<5;i++) base[i]*=(1-k+k*smallBias); for(let i=5;i<10;i++) base[i]*=(1-k+k*bigBias); base=normalize(base);
  }

  const seed=hash32(period+seedSalt); const rnd=mulberry32(seed);
  const B=64,j=hyper.jitter; const agg=Array(10).fill(0), votes=Array(10).fill(0);
  for(let b=0;b<B;b++){ const p=normalize(base.map(x=>Math.max(0,x*(1+(rnd()*2-1)*j)))); p.forEach((x,i)=>agg[i]+=x); votes[argmax(p)]++; }
  let probs=normalize(agg).map(p=>Math.pow(p,1/hyper.temp)); probs=normalize(probs);
  const iM=argmax(probs), mx=probs[iM];
  if(mx>hyper.cap){ const ex=mx-hyper.cap; probs[iM]-=ex; const rest=probs.reduce((a,b,i)=>i===iM?a:a+b,0)||1; const scale=(1-probs[iM])/rest; for(let i=0;i<10;i++) if(i!==iM) probs[i]*=scale; probs=normalize(probs); }
  const stab=Math.max(...votes)/B;
  let H=0; probs.forEach(p=>{if(p>0)H+=-p*Math.log(p)}); const entropy=clamp01(1-H/Math.log(10));
  const score=clamp01(0.55*entropy+0.45*stab);
  return {probs,score};
}
function predictEnsemble(period,mode,antiSeq,learnOn,packFlags,guard,gate){
  const members=[
    singleModel(period,mode,antiSeq,learnOn,packFlags,guard, 0.00,'A'),
    singleModel(period,mode,antiSeq,learnOn,{...packFlags,rev:!packFlags.rev},guard, 0.02,'B'),
    singleModel(period,mode,antiSeq,learnOn,{...packFlags,mir:!packFlags.mir},guard,-0.01,'C'),
    singleModel(period,'conservative',antiSeq,learnOn,packFlags,guard,-0.02,'D'),
    singleModel(period,'aggressive',antiSeq,learnOn,packFlags,guard, 0.03,'E'),
    singleModel(period,mode,!antiSeq,learnOn,packFlags,guard, 0.00,'F'),
  ];
  // median mix
  const mix=Array(10).fill(0); members.forEach(m=>m.probs.forEach((p,i)=>mix[i]+=p)); 
  let probs=normalize(mix);
  const picks=members.map(m=>argmax(m.probs));
  const consensus = [...new Set(picks)].map(d=>({d,count:picks.filter(x=>x===d).length}))
                   .sort((a,b)=>b.count-a.count)[0];
  const pick = consensus.d; const pmax=probs[pick];
  const score = members.reduce((a,b)=>a+b.score,0)/members.length;
  const pass = (consensus.count>=4) && (score>=gate) && (pmax>=0.55);
  return {probs,score,pass,pick,pmax,consensus};
}

/* ---------- chart & render ---------- */
let probChart=null;
function renderChart(probs){ const data=probs.map(p=>Math.round(p*1000)/10); const labels=[...Array(10).keys()].map(String);
  if(probChart) probChart.destroy();
  probChart=new Chart(el('probChart').getContext('2d'),{type:'bar',data:{labels,datasets:[{label:'Probability (%)',data}]},
    options:{responsive:true,scales:{y:{beginAtZero:true,title:{display:true,text:'%'}},x:{title:{display:true,text:'Digit'}}}}});
}
function renderResult(period,out,source='manual'){
  renderChart(out.probs);
  el('resultCard').style.display='block';
  el('vPeriod').textContent=period;
  el('vNum').textContent= out.pass ? out.pick : '‚Äî';
  el('vSize').textContent= out.pass ? (out.pick>=5?'Big':'Small') : '‚Äî';
  el('confBar').style.width=(out.score*100).toFixed(1)+'%';
  const h=el('hist'); if(h.textContent==='‚Äî') h.textContent='';
  const sig = out.pass ? `#${out.pick} (${out.pick>=5?'Big':'Small'})` : 'Skip';
  const cls = out.pass ? (out.score<0.6?'warn':'ok') : 'bad';
  el('playSignal').textContent = out.pass ? 'Play' : 'Skip';
  el('playSignal').className = 'pill '+cls;
  el('reasons').textContent = out.pass ? `Edge ${(out.score*100|0)}% ‚Ä¢ p=${(out.pmax*100).toFixed(0)} ‚Ä¢ c=${out.consensus.count}/6` : 'No edge';
  h.insertAdjacentHTML('afterbegin',`<div class="hrow">‚è± ${new Date().toLocaleTimeString()} ‚Ä¢ tail ${String(period).slice(-4)} ‚Üí ${sig}</div>`);
  [...h.children].slice(16).forEach(n=>n.remove());
  if(source==='auto' && el('autoNext').checked && out.pass){ notifyPopup({tail:String(period).slice(-3),digit:out.pick,size:(out.pick>=5?'Big':'Small')}); playDing(); }
}

/* ---------- run ---------- */
let autoTimer=null, busy=false;
async function runPredict(source='manual'){
  if(busy) return; busy=true; setTimeout(()=>busy=false,120);
  const pr=el('period').value.trim(); if(!isDigits(pr)){alert('Valid period number ‡§≠‡§∞‡•á‡§Ç');return;}
  el('periodInfo').textContent='Period: '+describePeriod(pr);
  const out=predictEnsemble(pr, el('mode').value, el('antiSeq').checked, el('learnOn').checked,
    {rev:el('pReverse').checked, mir:el('pMirror').checked, cont:el('pCont').checked, gap:el('pGap').checked},
    el('pGuard').checked, parseFloat(el('gate').value||'0.60')
  );
  renderResult(pr,out,source);
}
function startAuto(){ const sec=parseInt(el('autoEvery').value,10);
  clearInterval(autoTimer); autoTimer=setInterval(()=>{ const cur=el('period').value.trim(); if(isDigits(cur)) el('period').value=bump(cur); runPredict('auto'); },Math.max(5,sec)*1000); }

/* ---------- bindings ---------- */
document.addEventListener('DOMContentLoaded', ()=>{
  renderBias();
  el('btnPredict').onclick=()=>runPredict('manual');
  el('period').addEventListener('keydown',e=>{ if(e.key==='Enter') runPredict('manual'); });
  el('btnClear').onclick=()=>{ clearInterval(autoTimer); autoTimer=null; el('autoNext').checked=false;
    el('period').value=''; el('periodInfo').textContent='‚Äî'; el('resultCard').style.display='none'; el('hist').textContent='‚Äî';
    if(probChart){probChart.destroy();probChart=null} };
  el('btnCopy').onclick=async()=>{ const txt=`Period: ${el('vPeriod').textContent}, Number: ${el('vNum').textContent}, Size: ${el('vSize').textContent}`;
    try{ await navigator.clipboard.writeText(txt); alert('Copied!'); }catch{} };
  el('notifyBtn').onclick=async()=> alert((await ensureNotifyPerm())?'Notifications enabled':'Notifications blocked');
  el('autoNext').onchange=async e=>{ clearInterval(autoTimer); autoTimer=null; if(e.target.checked){ await ensureNotifyPerm(); startAuto(); } }
  el('autoEvery').onchange=()=>{ if(el('autoNext').checked) startAuto(); };

  el('btnVerify').onclick=()=>{ const pick=el('vNum').textContent.trim();
    if(!pick || pick==='‚Äî'){ el('verifyMsg').textContent='‡§™‡§π‡§≤‡•á Predict ‡§ï‡§∞‡•á‡§Ç.'; el('verifyMsg').style.color='#9ca3af'; return; }
    const chosen=document.querySelector('input[name="actSize"]:checked');
    if(!chosen){ el('verifyMsg').textContent='Actual ‡§ï‡•á ‡§≤‡§ø‡§è Big/Small ‡§ö‡•Å‡§®‡•á‡§Ç.'; el('verifyMsg').style.color='#9ca3af'; return; }
    const actual=chosen.value, predicted=(+pick>=5)?'big':'small', win=(actual===predicted);
    el('verifyMsg').textContent = win?`WIN ‚úî size ${predicted.toUpperCase()}`:`LOSS ‚úò picked ${predicted.toUpperCase()} ‚Ä¢ actual ${actual.toUpperCase()}`;
    el('verifyMsg').style.color = win?'var(--ok)':'var(--bad)';
    if(el('learnOn').checked){ const s=loadSize(); if(actual==='small') s[0]++; else s[1]++; saveSize(s); renderBias(); }
  };
});
</script>
</body>
</html>
